var t,e=Object.defineProperty,i=(t,i,s)=>((t,i,s)=>i in t?e(t,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[i]=s)(t,"symbol"!=typeof i?i+"":i,s);import{r as s,a as n,_ as o,C as a,b as r,E as l,F as h,o as c,L as d,g as u,c as f,d as g,i as p,e as m,f as x,v as b,h as y,j as _,k as v,l as w,m as k,q as M,n as S,w as C,p as D,s as A,t as P,u as T,x as I,y as O,z as j,A as R,B as E,D as L,G as z,H as N,I as F,J as B,R as W,K as V,M as H,T as $}from"./vendor-C5LqAqW7.js";var U={exports:{}},Y={},q=s,X=Symbol.for("react.element"),K=Symbol.for("react.fragment"),G=Object.prototype.hasOwnProperty,J=q.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Z={key:!0,ref:!0,__self:!0,__source:!0};function Q(t,e,i){var s,n={},o=null,a=null;for(s in void 0!==i&&(o=""+i),void 0!==e.key&&(o=""+e.key),void 0!==e.ref&&(a=e.ref),e)G.call(e,s)&&!Z.hasOwnProperty(s)&&(n[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps)void 0===n[s]&&(n[s]=e[s]);return{$$typeof:X,type:t,key:o,ref:a,props:n,_owner:J.current}}Y.Fragment=K,Y.jsx=Q,Y.jsxs=Q,U.exports=Y;var tt=U.exports;const et="@firebase/installations",it="0.6.12",st=1e4,nt=`w:${it}`,ot="FIS_v2",at=36e5,rt=new l("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function lt(t){return t instanceof h&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht({projectId:t}){return`https://firebaseinstallations.googleapis.com/v1/projects/${t}/installations`}function ct(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}async function dt(t,e){const i=(await e.json()).error;return rt.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function ut({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ft(t,{refreshToken:e}){const i=ut(t);return i.append("Authorization",function(t){return`${ot} ${t}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),i}async function gt(t){const e=await t();return e.status>=500&&e.status<600?t():e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pt(t){return new Promise((e=>{setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const mt=/^[cdef][\w-]{21}$/;function xt(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const e=function(t){const e=(i=t,btoa(String.fromCharCode(...i)).replace(/\+/g,"-").replace(/\//g,"_"));var i;return e.substr(0,22)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return mt.test(e)?e:""}catch(t){return""}}function bt(t){return`${t.appName}!${t.appId}`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt=new Map;function _t(t,e){const i=bt(t);vt(i,e),function(t,e){const i=function(){!wt&&"BroadcastChannel"in self&&(wt=new BroadcastChannel("[Firebase] FID Change"),wt.onmessage=t=>{vt(t.data.key,t.data.fid)});return wt}();i&&i.postMessage({key:t,fid:e});0===yt.size&&wt&&(wt.close(),wt=null)}(i,e)}function vt(t,e){const i=yt.get(t);if(i)for(const s of i)s(e)}let wt=null;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const kt="firebase-installations-store";let Mt=null;function St(){return Mt||(Mt=c("firebase-installations-database",1,{upgrade:(t,e)=>{if(0===e)t.createObjectStore(kt)}})),Mt}async function Ct(t,e){const i=bt(t),s=(await St()).transaction(kt,"readwrite"),n=s.objectStore(kt),o=await n.get(i);return await n.put(e,i),await s.done,o&&o.fid===e.fid||_t(t,e.fid),e}async function Dt(t){const e=bt(t),i=(await St()).transaction(kt,"readwrite");await i.objectStore(kt).delete(e),await i.done}async function At(t,e){const i=bt(t),s=(await St()).transaction(kt,"readwrite"),n=s.objectStore(kt),o=await n.get(i),a=e(o);return void 0===a?await n.delete(i):await n.put(a,i),await s.done,!a||o&&o.fid===a.fid||_t(t,a.fid),a}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pt(t){let e;const i=await At(t.appConfig,(i=>{const s=function(t){const e=t||{fid:xt(),registrationStatus:0};return Ot(e)}(i),n=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine){return{installationEntry:e,registrationPromise:Promise.reject(rt.create("app-offline"))}}const i={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=async function(t,e){try{const i=await async function({appConfig:t,heartbeatServiceProvider:e},{fid:i}){const s=ht(t),n=ut(t),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&n.append("x-firebase-client",t)}const a={fid:i,authVersion:ot,appId:t.appId,sdkVersion:nt},r={method:"POST",headers:n,body:JSON.stringify(a)},l=await gt((()=>fetch(s,r)));if(l.ok){const t=await l.json();return{fid:t.fid||i,registrationStatus:2,refreshToken:t.refreshToken,authToken:ct(t.authToken)}}throw await dt("Create Installation",l)}(t,e);return Ct(t.appConfig,i)}catch(i){throw lt(i)&&409===i.customData.serverCode?await Dt(t.appConfig):await Ct(t.appConfig,{fid:e.fid,registrationStatus:0}),i}}(t,i);return{installationEntry:i,registrationPromise:s}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:Tt(t)}:{installationEntry:e}}(t,s);return e=n.registrationPromise,n.installationEntry}));return""===i.fid?{installationEntry:await e}:{installationEntry:i,registrationPromise:e}}async function Tt(t){let e=await It(t.appConfig);for(;1===e.registrationStatus;)await pt(100),e=await It(t.appConfig);if(0===e.registrationStatus){const{installationEntry:e,registrationPromise:i}=await Pt(t);return i||e}return e}function It(t){return At(t,(t=>{if(!t)throw rt.create("installation-not-found");return Ot(t)}))}function Ot(t){return 1===(e=t).registrationStatus&&e.registrationTime+st<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}async function jt({appConfig:t,heartbeatServiceProvider:e},i){const s=function(t,{fid:e}){return`${ht(t)}/${e}/authTokens:generate`}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,i),n=ft(t,i),o=e.getImmediate({optional:!0});if(o){const t=await o.getHeartbeatsHeader();t&&n.append("x-firebase-client",t)}const a={installation:{sdkVersion:nt,appId:t.appId}},r={method:"POST",headers:n,body:JSON.stringify(a)},l=await gt((()=>fetch(s,r)));if(l.ok){return ct(await l.json())}throw await dt("Generate Auth Token",l)}async function Rt(t,e=!1){let i;const s=await At(t.appConfig,(s=>{if(!Lt(s))throw rt.create("not-registered");const n=s.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+at}(t)}(n))return s;if(1===n.requestStatus)return i=async function(t,e){let i=await Et(t.appConfig);for(;1===i.authToken.requestStatus;)await pt(100),i=await Et(t.appConfig);const s=i.authToken;return 0===s.requestStatus?Rt(t,e):s}(t,e),s;{if(!navigator.onLine)throw rt.create("app-offline");const e=function(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}(s);return i=async function(t,e){try{const i=await jt(t,e),s=Object.assign(Object.assign({},e),{authToken:i});return await Ct(t.appConfig,s),i}catch(i){if(!lt(i)||401!==i.customData.serverCode&&404!==i.customData.serverCode){const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Ct(t.appConfig,i)}else await Dt(t.appConfig);throw i}}(t,e),e}}));return i?await i:s.authToken}function Et(t){return At(t,(t=>{if(!Lt(t))throw rt.create("not-registered");const e=t.authToken;return 1===(i=e).requestStatus&&i.requestTime+st<Date.now()?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t;var i;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}function Lt(t){return void 0!==t&&2===t.registrationStatus}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function zt(t,e=!1){const i=t;await async function(t){const{registrationPromise:e}=await Pt(t);e&&await e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i);return(await Rt(i,e)).token}function Nt(t){return rt.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft="installations",Bt=t=>{const e=t.getProvider("app").getImmediate(),i=r(e,Ft).getImmediate();return{getId:()=>async function(t){const e=t,{installationEntry:i,registrationPromise:s}=await Pt(e);return s?s.catch(console.error):Rt(e).catch(console.error),i.fid}(i),getToken:t=>zt(i,t)}};o(new a(Ft,(t=>{const e=t.getProvider("app").getImmediate(),i=function(t){if(!t||!t.options)throw Nt("App Configuration");if(!t.name)throw Nt("App Name");const e=["projectId","apiKey","appId"];for(const i of e)if(!t.options[i])throw Nt(i);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e);return{app:e,appConfig:i,heartbeatServiceProvider:r(e,"heartbeat"),_delete:()=>Promise.resolve()}}),"PUBLIC")),o(new a("installations-internal",Bt,"PRIVATE")),n(et,it),n(et,it,"esm2017");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Wt="analytics",Vt="https://www.googletagmanager.com/gtag/js",Ht=new d("@firebase/analytics"),$t=new l("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ut(t){if(!t.startsWith(Vt)){const e=$t.create("invalid-gtag-resource",{gtagURL:t});return Ht.warn(e.message),""}return t}function Yt(t){return Promise.all(t.map((t=>t.catch((t=>t)))))}function qt(t,e){const i=function(t,e){let i;return window.trustedTypes&&(i=window.trustedTypes.createPolicy(t,e)),i}("firebase-js-sdk-policy",{createScriptURL:Ut}),s=document.createElement("script"),n=`${Vt}?l=${t}&id=${e}`;s.src=i?null==i?void 0:i.createScriptURL(n):n,s.async=!0,document.head.appendChild(s)}function Xt(t,e,i,s){return async function(n,...o){try{if("event"===n){const[s,n]=o;await async function(t,e,i,s,n){try{let o=[];if(n&&n.send_to){let t=n.send_to;Array.isArray(t)||(t=[t]);const s=await Yt(i);for(const i of t){const t=s.find((t=>t.measurementId===i)),n=t&&e[t.appId];if(!n){o=[];break}o.push(n)}}0===o.length&&(o=Object.values(e)),await Promise.all(o),t("event",s,n||{})}catch(o){Ht.error(o)}}(t,e,i,s,n)}else if("config"===n){const[n,a]=o;await async function(t,e,i,s,n,o){const a=s[n];try{if(a)await e[a];else{const t=(await Yt(i)).find((t=>t.measurementId===n));t&&await e[t.appId]}}catch(r){Ht.error(r)}t("config",n,o)}(t,e,i,s,n,a)}else if("consent"===n){const[e,i]=o;t("consent",e,i)}else if("get"===n){const[e,i,s]=o;t("get",e,i,s)}else if("set"===n){const[e]=o;t("set",e)}else t(n,...o)}catch(a){Ht.error(a)}}}const Kt=new class{constructor(t={},e=1e3){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}};function Gt(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function Jt(t,e=Kt,i){const{appId:s,apiKey:n,measurementId:o}=t.options;if(!s)throw $t.create("no-app-id");if(!n){if(o)return{measurementId:o,appId:s};throw $t.create("no-api-key")}const a=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},r=new Qt;return setTimeout((async()=>{r.abort()}),6e4),Zt({appId:s,apiKey:n,measurementId:o},a,r,e)}async function Zt(t,{throttleEndTimeMillis:e,backoffCount:i},s,n=Kt){var o;const{appId:a,measurementId:r}=t;try{await function(t,e){return new Promise(((i,s)=>{const n=Math.max(e-Date.now(),0),o=setTimeout(i,n);t.addEventListener((()=>{clearTimeout(o),s($t.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}(s,e)}catch(l){if(r)return Ht.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${r} provided in the "measurementId" field in the local Firebase config. [${null==l?void 0:l.message}]`),{appId:a,measurementId:r};throw l}try{const e=await async function(t){var e;const{appId:i,apiKey:s}=t,n={method:"GET",headers:Gt(s)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",i),a=await fetch(o,n);if(200!==a.status&&304!==a.status){let t="";try{const i=await a.json();(null===(e=i.error)||void 0===e?void 0:e.message)&&(t=i.error.message)}catch(r){}throw $t.create("config-fetch-failed",{httpStatus:a.status,responseMessage:t})}return a.json()}(t);return n.deleteThrottleMetadata(a),e}catch(l){const e=l;if(!function(t){if(!(t instanceof h&&t.customData))return!1;const e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(e)){if(n.deleteThrottleMetadata(a),r)return Ht.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${r} provided in the "measurementId" field in the local Firebase config. [${null==e?void 0:e.message}]`),{appId:a,measurementId:r};throw l}const c=503===Number(null===(o=null==e?void 0:e.customData)||void 0===o?void 0:o.httpStatus)?m(i,n.intervalMillis,30):m(i,n.intervalMillis),d={throttleEndTimeMillis:Date.now()+c,backoffCount:i+1};return n.setThrottleMetadata(a,d),Ht.debug(`Calling attemptFetch again in ${c} millis`),Zt(t,d,s,n)}}class Qt{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach((t=>t()))}}async function te(t,e,i,s,n,o,a){var r;const l=Jt(t);l.then((e=>{i[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&Ht.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${e.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)})).catch((t=>Ht.error(t))),e.push(l);const h=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(){if(!x())return Ht.warn($t.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await b()}catch(t){return Ht.warn($t.create("indexeddb-unavailable",{errorInfo:null==t?void 0:t.toString()}).message),!1}return!0}().then((t=>t?s.getId():void 0)),[c,d]=await Promise.all([l,h]);(function(t){const e=window.document.getElementsByTagName("script");for(const i of Object.values(e))if(i.src&&i.src.includes(Vt)&&i.src.includes(t))return i;return null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(o)||qt(o,c.measurementId),n("js",new Date);const u=null!==(r=null==a?void 0:a.config)&&void 0!==r?r:{};return u.origin="firebase",u.update=!0,null!=d&&(u.firebase_id=d),n("config",c.measurementId,u),c.measurementId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.app=t}_delete(){return delete ie[this.app.options.appId],Promise.resolve()}}let ie={},se=[];const ne={};let oe,ae,re="dataLayer",le=!1;function he(t,e,i){!function(){const t=[];if(p()&&t.push("This is a browser extension environment."),y()||t.push("Cookies are not available."),t.length>0){const e=t.map(((t,e)=>`(${e+1}) ${t}`)).join(" "),i=$t.create("invalid-analytics-context",{errorInfo:e});Ht.warn(i.message)}}();const s=t.options.appId;if(!s)throw $t.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw $t.create("no-api-key");Ht.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ie[s])throw $t.create("already-exists",{id:s});if(!le){!function(t){let e=[];Array.isArray(window[t])?e=window[t]:window[t]=e}(re);const{wrappedGtag:t,gtagCore:e}=function(t,e,i,s,n){let o=function(...t){window[s].push(arguments)};return window[n]&&"function"==typeof window[n]&&(o=window[n]),window[n]=Xt(o,t,e,i),{gtagCore:o,wrappedGtag:window[n]}}(ie,se,ne,re,"gtag");ae=t,oe=e,le=!0}ie[s]=te(t,se,ne,e,oe,re,i);return new ee(t)}function ce(t,e,i,s){t=u(t),async function(t,e,i,s,n){if(n&&n.global)t("event",i,s);else{const n=await e;t("event",i,Object.assign(Object.assign({},s),{send_to:n}))}}(ae,ie[t.app.options.appId],e,i,s).catch((t=>Ht.error(t)))}const de="@firebase/analytics",ue="0.10.11";o(new a(Wt,((t,{options:e})=>he(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),e)),"PUBLIC")),o(new a("analytics-internal",(function(t){try{const e=t.getProvider(Wt).getImmediate();return{logEvent:(t,i,s)=>ce(e,t,i,s)}}catch(e){throw $t.create("interop-component-reg-failed",{reason:e})}}),"PRIVATE")),n(de,ue),n(de,ue,"esm2017");const fe=_({apiKey:"AIzaSyA3LBfJuoPh6XMXR4-Gs2UVUZ6-_yegGPU",authDomain:"ultrai.firebaseapp.com",projectId:"ultrai",storageBucket:"ultrai.firebasestorage.app",messagingSenderId:"661387675505",appId:"1:661387675505:web:844e1ff78fa9b1ba97d8d0",measurementId:"G-EL8TQ39WEX"}),ge=v(fe),pe=w(fe),me=k(fe);!function(t=f()){t=u(t);const e=r(t,Wt);e.isInitialized()?e.getImmediate():function(t,e={}){const i=r(t,Wt);if(i.isInitialized()){const t=i.getImmediate();if(g(e,i.getOptions()))return t;throw $t.create("already-initialized")}const s=i.initialize({options:e})}(t)}(fe);const xe={async getPublishedArticles(){const t=M(D(me,"articles"),C("published","==",!0),S("date","desc"));return(await A(t)).docs.map((t=>({id:t.id,...t.data()})))},async getAllArticles(){const t=M(D(me,"articles"),S("date","desc"));return(await A(t)).docs.map((t=>({id:t.id,...t.data()})))},async getArticle(t){const e=P(me,"articles",t),i=await T(e);return i.exists()?{id:i.id,...i.data()}:null},createArticle:async t=>(await I(D(me,"articles"),{...t,date:new Date})).id,async updateArticle(t,e){const i=P(me,"articles",t);await O(i,e)},async deleteArticle(t){const e=P(me,"articles",t);await j(e)},async uploadImage(t,e){const i=R(pe,`articles/${e}`);return await E(i,t),L(i)},async deleteImage(t){const e=R(pe,t);await z(e)},generateSlug:t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,"")},be={async getCategories(){const t=M(D(me,"categories"));return(await A(t)).docs.map((t=>({id:t.id,...t.data()})))},createCategory:async t=>(await I(D(me,"categories"),{...t,createdAt:new Date,updatedAt:new Date})).id,async updateCategory(t,e){const i=P(me,"categories",t);await O(i,{...e,updatedAt:new Date})},async deleteCategory(t){const e=D(me,"articles"),i=M(e,C("category","==",t));if(!(await A(i)).empty)throw new Error("Cette catégorie est utilisée par des articles et ne peut pas être supprimée");const s=P(me,"categories",t);await j(s)},generateSlug:t=>t.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),generateColor(){const t=["blue","green","red","yellow","purple","pink","indigo","teal"];return t[Math.floor(Math.random()*t.length)]},getColorClass(t){const e={blue:{bg:"bg-blue-100",text:"text-blue-800",border:"border-blue-200"},green:{bg:"bg-green-100",text:"text-green-800",border:"border-green-200"},red:{bg:"bg-red-100",text:"text-red-800",border:"border-red-200"},yellow:{bg:"bg-yellow-100",text:"text-yellow-800",border:"border-yellow-200"},purple:{bg:"bg-purple-100",text:"text-purple-800",border:"border-purple-200"},pink:{bg:"bg-pink-100",text:"text-pink-800",border:"border-pink-200"},indigo:{bg:"bg-indigo-100",text:"text-indigo-800",border:"border-indigo-200"},teal:{bg:"bg-teal-100",text:"text-teal-800",border:"border-teal-200"}};return e[t]||e.blue}};function ye(){const[t,e]=s.useState([]),[i,n]=s.useState(!0),[o,a]=s.useState(null),[r,l]=s.useState(null),[h,c]=s.useState({name:"",description:""}),[d,u]=s.useState(!1);s.useEffect((()=>{f()}),[]);const f=async()=>{try{n(!0);const t=await be.getCategories();e(t)}catch(t){a("Erreur lors du chargement des catégories")}finally{n(!1)}},g=()=>{c({name:"",description:""}),l(null),u(!1),a(null)};return tt.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[tt.jsxs("div",{className:"flex justify-between items-center mb-6",children:[tt.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Gestion des catégories"}),tt.jsx("button",{onClick:()=>u(!d),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:d?"Annuler":"Nouvelle catégorie"})]}),o&&tt.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-400 p-4",children:tt.jsxs("div",{className:"flex",children:[tt.jsx("div",{className:"flex-shrink-0",children:tt.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:tt.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),tt.jsx("div",{className:"ml-3",children:tt.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),d&&tt.jsx("form",{onSubmit:async t=>{t.preventDefault();try{const t={...h,slug:be.generateSlug(h.name),color:h.color||be.generateColor(),createdAt:new Date,updatedAt:new Date};r?await be.updateCategory(r.id,t):await be.createCategory(t),await f(),g()}catch(e){a("Erreur lors de la sauvegarde de la catégorie")}},className:"mb-8 bg-white shadow rounded-lg p-6",children:tt.jsxs("div",{className:"space-y-6",children:[tt.jsxs("div",{children:[tt.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Nom"}),tt.jsx("input",{type:"text",id:"name",required:!0,value:h.name,onChange:t=>c({...h,name:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),tt.jsxs("div",{children:[tt.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),tt.jsx("textarea",{id:"description",rows:3,value:h.description,onChange:t=>c({...h,description:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm"})]}),tt.jsxs("div",{children:[tt.jsx("label",{htmlFor:"parentId",className:"block text-sm font-medium text-gray-700",children:"Catégorie parente"}),tt.jsxs("select",{id:"parentId",value:h.parentId||"",onChange:t=>c({...h,parentId:t.target.value||void 0}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[tt.jsx("option",{value:"",children:"Aucune"}),t.filter((t=>t.id!==(null==r?void 0:r.id))).map((t=>tt.jsx("option",{value:t.id,children:t.name},t.id)))]})]}),tt.jsxs("div",{children:[tt.jsx("label",{htmlFor:"color",className:"block text-sm font-medium text-gray-700",children:"Couleur"}),tt.jsxs("select",{id:"color",value:h.color||"",onChange:t=>c({...h,color:t.target.value}),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",children:[tt.jsx("option",{value:"",children:"Aléatoire"}),tt.jsx("option",{value:"blue",children:"Bleu"}),tt.jsx("option",{value:"green",children:"Vert"}),tt.jsx("option",{value:"red",children:"Rouge"}),tt.jsx("option",{value:"yellow",children:"Jaune"}),tt.jsx("option",{value:"purple",children:"Violet"}),tt.jsx("option",{value:"pink",children:"Rose"}),tt.jsx("option",{value:"indigo",children:"Indigo"}),tt.jsx("option",{value:"teal",children:"Turquoise"})]})]}),tt.jsxs("div",{className:"flex justify-end space-x-3",children:[tt.jsx("button",{type:"button",onClick:g,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Annuler"}),tt.jsx("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r?"Mettre à jour":"Créer"})]})]})}),tt.jsx("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:tt.jsx("ul",{className:"divide-y divide-gray-200",children:t.map((t=>{const e=be.getColorClass(t.color||"blue");return tt.jsx("li",{className:"px-6 py-4",children:tt.jsxs("div",{className:"flex items-center justify-between",children:[tt.jsxs("div",{className:"flex items-center space-x-3",children:[tt.jsx("span",{className:`inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium ${e.bg} ${e.text} ${e.border}`,children:t.name}),t.description&&tt.jsx("span",{className:"text-sm text-gray-500",children:t.description})]}),tt.jsxs("div",{className:"flex items-center space-x-3",children:[tt.jsx("button",{onClick:()=>(t=>{l(t),c({name:t.name,description:t.description||"",parentId:t.parentId,color:t.color}),u(!0)})(t),className:"text-blue-600 hover:text-blue-900",children:"Modifier"}),tt.jsx("button",{onClick:()=>(async t=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer cette catégorie ?"))try{await be.deleteCategory(t.id),await f()}catch(e){e instanceof Error?a(e.message):a("Erreur lors de la suppression de la catégorie")}})(t),className:"text-red-600 hover:text-red-900",children:"Supprimer"})]})]})},t.id)}))})}),i&&tt.jsx("div",{className:"flex justify-center mt-4",children:tt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}const _e={async getComments(t,e){const i=D(me,"comments"),s=[C("articleId","==",t),S("createdAt","desc")];e&&s.push(C("status","==",e));const n=M(i,...s);return(await A(n)).docs.map((t=>({id:t.id,...t.data(),createdAt:t.data().createdAt.toDate(),updatedAt:t.data().updatedAt.toDate()})))},createComment:async t=>(await I(D(me,"comments"),{...t,likes:0,createdAt:N(),updatedAt:N()})).id,async updateComment(t,e){const i=P(me,"comments",t);await O(i,{...e,updatedAt:N()})},async deleteComment(t){const e=D(me,"comments"),i=M(e,C("parentId","==",t)),s=await A(i),n=F(me);s.docs.forEach((t=>{n.delete(t.ref)}));const o=P(me,"comments",t);n.delete(o),await n.commit()},async moderateComment(t,e){await this.updateComment(t,{status:e})},async likeComment(t){const e=F(me),i=P(me,"comments",t);e.update(i,{likes:B(1)}),await e.commit()},async getPendingComments(){return this.getComments("","pending")},formatRelativeDate(t){const e=(new Date).getTime()-t.getTime(),i=Math.floor(e/1e3),s=Math.floor(i/60),n=Math.floor(s/60),o=Math.floor(n/24);return o>7?t.toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}):o>0?`il y a ${o} jour${o>1?"s":""}`:n>0?`il y a ${n} heure${n>1?"s":""}`:s>0?`il y a ${s} minute${s>1?"s":""}`:"à l'instant"}};function ve(){const[t,e]=s.useState([]),[i,n]=s.useState(!0),[o,a]=s.useState(null);s.useEffect((()=>{r()}),[]);const r=async()=>{try{n(!0);const t=await _e.getPendingComments(),i=await Promise.all(t.map((async t=>{try{const e=await xe.getArticle(t.articleId);return{...t,articleTitle:(null==e?void 0:e.title)||"Article supprimé"}}catch(e){return{...t,articleTitle:"Article non trouvé"}}})));e(i)}catch(t){a("Erreur lors du chargement des commentaires")}finally{n(!1)}},l=async(i,s)=>{try{await _e.moderateComment(i,s),e(t.filter((t=>t.id!==i)))}catch(n){a("Erreur lors de la modération du commentaire")}};return tt.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[tt.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Modération des commentaires"}),o&&tt.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-400 p-4",children:tt.jsxs("div",{className:"flex",children:[tt.jsx("div",{className:"flex-shrink-0",children:tt.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:tt.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),tt.jsx("div",{className:"ml-3",children:tt.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),tt.jsxs("div",{className:"bg-white shadow overflow-hidden sm:rounded-md",children:[tt.jsx("ul",{className:"divide-y divide-gray-200",children:t.map((i=>tt.jsx("li",{className:"p-6",children:tt.jsxs("div",{className:"space-y-4",children:[tt.jsxs("div",{className:"flex items-center justify-between",children:[tt.jsxs("div",{children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-900",children:i.author.name}),tt.jsx("p",{className:"text-sm text-gray-500",children:i.author.email})]}),tt.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"En attente"})]}),tt.jsxs("div",{children:[tt.jsxs("p",{className:"text-sm text-gray-600",children:["Article : ",i.articleTitle]}),tt.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.content})]}),tt.jsxs("div",{className:"flex items-center justify-between",children:[tt.jsx("p",{className:"text-sm text-gray-500",children:_e.formatRelativeDate(i.createdAt)}),tt.jsxs("div",{className:"flex items-center space-x-4",children:[tt.jsx("button",{onClick:()=>l(i.id,"approved"),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:"Approuver"}),tt.jsx("button",{onClick:()=>l(i.id,"rejected"),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-yellow-600 hover:bg-yellow-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500",children:"Rejeter"}),tt.jsx("button",{onClick:()=>(async i=>{if(window.confirm("Êtes-vous sûr de vouloir supprimer ce commentaire ?"))try{await _e.deleteComment(i),e(t.filter((t=>t.id!==i)))}catch(s){a("Erreur lors de la suppression du commentaire")}})(i.id),className:"inline-flex items-center px-3 py-1.5 border border-transparent text-xs font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Supprimer"})]})]})]})},i.id)))}),0===t.length&&!i&&tt.jsxs("div",{className:"text-center py-12",children:[tt.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:tt.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),tt.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun commentaire en attente"}),tt.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Tous les commentaires ont été modérés."})]}),i&&tt.jsx("div",{className:"flex justify-center py-8",children:tt.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})]})}
/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function we(t){return t+.5|0}const ke=(t,e,i)=>Math.max(Math.min(t,i),e);function Me(t){return ke(we(2.55*t),0,255)}function Se(t){return ke(we(255*t),0,255)}function Ce(t){return ke(we(t/2.55)/100,0,1)}function De(t){return ke(we(100*t),0,100)}const Ae={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Pe=[..."0123456789ABCDEF"],Te=t=>Pe[15&t],Ie=t=>Pe[(240&t)>>4]+Pe[15&t],Oe=t=>(240&t)>>4==(15&t);function je(t){var e=(t=>Oe(t.r)&&Oe(t.g)&&Oe(t.b)&&Oe(t.a))(t)?Te:Ie;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const Re=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ee(t,e,i){const s=e*Math.min(i,1-i),n=(e,n=(e+t/30)%12)=>i-s*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function Le(t,e,i){const s=(s,n=(s+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function ze(t,e,i){const s=Ee(t,1,.5);let n;for(e+i>1&&(n=1/(e+i),e*=n,i*=n),n=0;n<3;n++)s[n]*=1-e-i,s[n]+=e;return s}function Ne(t){const e=t.r/255,i=t.g/255,s=t.b/255,n=Math.max(e,i,s),o=Math.min(e,i,s),a=(n+o)/2;let r,l,h;return n!==o&&(h=n-o,l=a>.5?h/(2-n-o):h/(n+o),r=function(t,e,i,s,n){return t===n?(e-i)/s+(e<i?6:0):e===n?(i-t)/s+2:(t-e)/s+4}(e,i,s,h,n),r=60*r+.5),[0|r,l||0,a]}function Fe(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(Se)}function Be(t,e,i){return Fe(Ee,t,e,i)}function We(t){return(t%360+360)%360}function Ve(t){const e=Re.exec(t);let i,s=255;if(!e)return;e[5]!==i&&(s=e[6]?Me(+e[5]):Se(+e[5]));const n=We(+e[2]),o=+e[3]/100,a=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return Fe(ze,t,e,i)}(n,o,a):"hsv"===e[1]?function(t,e,i){return Fe(Le,t,e,i)}(n,o,a):Be(n,o,a),{r:i[0],g:i[1],b:i[2],a:s}}const He={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},$e={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ue;function Ye(t){Ue||(Ue=function(){const t={},e=Object.keys($e),i=Object.keys(He);let s,n,o,a,r;for(s=0;s<e.length;s++){for(a=r=e[s],n=0;n<i.length;n++)o=i[n],r=r.replace(o,He[o]);o=parseInt($e[a],16),t[r]=[o>>16&255,o>>8&255,255&o]}return t}(),Ue.transparent=[0,0,0,0]);const e=Ue[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const qe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const Xe=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Ke=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ge(t,e,i){if(t){let s=Ne(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,0===e?360:1)),s=Be(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function Je(t,e){return t?Object.assign(e||{},t):t}function Ze(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Se(t[3]))):(e=Je(t,{r:0,g:0,b:0,a:1})).a=Se(e.a),e}function Qe(t){return"r"===t.charAt(0)?function(t){const e=qe.exec(t);let i,s,n,o=255;if(e){if(e[7]!==i){const t=+e[7];o=e[8]?Me(t):ke(255*t,0,255)}return i=+e[1],s=+e[3],n=+e[5],i=255&(e[2]?Me(i):ke(i,0,255)),s=255&(e[4]?Me(s):ke(s,0,255)),n=255&(e[6]?Me(n):ke(n,0,255)),{r:i,g:s,b:n,a:o}}}(t):Ve(t)}class ti{constructor(t){if(t instanceof ti)return t;const e=typeof t;let i;var s,n,o;"object"===e?i=Ze(t):"string"===e&&(o=(s=t).length,"#"===s[0]&&(4===o||5===o?n={r:255&17*Ae[s[1]],g:255&17*Ae[s[2]],b:255&17*Ae[s[3]],a:5===o?17*Ae[s[4]]:255}:7!==o&&9!==o||(n={r:Ae[s[1]]<<4|Ae[s[2]],g:Ae[s[3]]<<4|Ae[s[4]],b:Ae[s[5]]<<4|Ae[s[6]],a:9===o?Ae[s[7]]<<4|Ae[s[8]]:255})),i=n||Ye(t)||Qe(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=Je(this._rgb);return t&&(t.a=Ce(t.a)),t}set rgb(t){this._rgb=Ze(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ce(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?je(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Ne(t),i=e[0],s=De(e[1]),n=De(e[2]);return t.a<255?`hsla(${i}, ${s}%, ${n}%, ${Ce(t.a)})`:`hsl(${i}, ${s}%, ${n}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let n;const o=e===n?.5:e,a=2*o-1,r=i.a-s.a,l=((a*r==-1?a:(a+r)/(1+a*r))+1)/2;n=1-l,i.r=255&l*i.r+n*s.r+.5,i.g=255&l*i.g+n*s.g+.5,i.b=255&l*i.b+n*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const s=Ke(Ce(t.r)),n=Ke(Ce(t.g)),o=Ke(Ce(t.b));return{r:Se(Xe(s+i*(Ke(Ce(e.r))-s))),g:Se(Xe(n+i*(Ke(Ce(e.g))-n))),b:Se(Xe(o+i*(Ke(Ce(e.b))-o))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new ti(this.rgb)}alpha(t){return this._rgb.a=Se(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=we(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Ge(this._rgb,2,t),this}darken(t){return Ge(this._rgb,2,-t),this}saturate(t){return Ge(this._rgb,1,t),this}desaturate(t){return Ge(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=Ne(t);i[0]=We(i[0]+e),i=Be(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function ei(){}const ii=(()=>{let t=0;return()=>t++})();function si(t){return null==t}function ni(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function oi(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function ai(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function ri(t,e){return ai(t)?t:e}function li(t,e){return void 0===t?e:t}const hi=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function ci(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function di(t,e,i,s){let n,o,a;if(ni(t))for(o=t.length,n=0;n<o;n++)e.call(i,t[n],n);else if(oi(t))for(a=Object.keys(t),o=a.length,n=0;n<o;n++)e.call(i,t[a[n]],a[n])}function ui(t,e){let i,s,n,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(n=t[i],o=e[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function fi(t){if(ni(t))return t.map(fi);if(oi(t)){const e=Object.create(null),i=Object.keys(t),s=i.length;let n=0;for(;n<s;++n)e[i[n]]=fi(t[i[n]]);return e}return t}function gi(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function pi(t,e,i,s){if(!gi(t))return;const n=e[t],o=i[t];oi(n)&&oi(o)?mi(n,o,s):e[t]=fi(o)}function mi(t,e,i){const s=ni(e)?e:[e],n=s.length;if(!oi(t))return t;const o=(i=i||{}).merger||pi;let a;for(let r=0;r<n;++r){if(a=s[r],!oi(a))continue;const e=Object.keys(a);for(let s=0,n=e.length;s<n;++s)o(e[s],t,a,i)}return t}function xi(t,e){return mi(t,e,{merger:bi})}function bi(t,e,i){if(!gi(t))return;const s=e[t],n=i[t];oi(s)&&oi(n)?xi(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=fi(n))}const yi={"":t=>t,x:t=>t.x,y:t=>t.y};function _i(t,e){const i=yi[e]||(yi[e]=function(t){const e=function(t){const e=t.split("."),i=[];let s="";for(const n of e)s+=n,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e));return i(t)}function vi(t){return t.charAt(0).toUpperCase()+t.slice(1)}const wi=t=>void 0!==t,ki=t=>"function"==typeof t,Mi=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};const Si=Math.PI,Ci=2*Si,Di=Ci+Si,Ai=Number.POSITIVE_INFINITY,Pi=Si/180,Ti=Si/2,Ii=Si/4,Oi=2*Si/3,ji=Math.log10,Ri=Math.sign;function Ei(t,e,i){return Math.abs(t-e)<i}function Li(t){const e=Math.round(t);t=Ei(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor(ji(t))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function zi(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Ni(t){return t*(Si/180)}function Fi(t){if(!ai(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function Bi(t,e){const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);let o=Math.atan2(s,i);return o<-.5*Si&&(o+=Ci),{angle:o,distance:n}}function Wi(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Vi(t,e){return(t-e+Di)%Ci-Si}function Hi(t){return(t%Ci+Ci)%Ci}function $i(t,e,i,s){const n=Hi(t),o=Hi(e),a=Hi(i),r=Hi(o-n),l=Hi(a-n),h=Hi(n-o),c=Hi(n-a);return n===o||n===a||s&&o===a||r>l&&h<c}function Ui(t,e,i){return Math.max(e,Math.min(i,t))}function Yi(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function qi(t,e,i){i=i||(i=>t[i]<e);let s,n=t.length-1,o=0;for(;n-o>1;)s=o+n>>1,i(s)?o=s:n=s;return{lo:o,hi:n}}const Xi=(t,e,i,s)=>qi(t,i,s?s=>{const n=t[s][e];return n<i||n===i&&t[s+1][e]===i}:s=>t[s][e]<i),Ki=(t,e,i)=>qi(t,i,(s=>t[s][e]>=i));const Gi=["push","pop","shift","splice","unshift"];function Ji(t,e){const i=t._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(e);-1!==n&&s.splice(n,1),s.length>0||(Gi.forEach((e=>{delete t[e]})),delete t._chartjs)}function Zi(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Qi="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function ts(t,e){let i=[],s=!1;return function(...n){i=n,s||(s=!0,Qi.call(window,(()=>{s=!1,t.apply(e,i)})))}}const es=t=>"start"===t?"left":"end"===t?"right":"center",is=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;const ss=t=>0===t||1===t,ns=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ci/i),os=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ci/i)+1,as={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*Ti),easeOutSine:t=>Math.sin(t*Ti),easeInOutSine:t=>-.5*(Math.cos(Si*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>ss(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>ss(t)?t:ns(t,.075,.3),easeOutElastic:t=>ss(t)?t:os(t,.075,.3),easeInOutElastic(t){const e=.1125;return ss(t)?t:t<.5?.5*ns(2*t,e,.45):.5+.5*os(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-as.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*as.easeInBounce(2*t):.5*as.easeOutBounce(2*t-1)+.5};function rs(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function ls(t){return rs(t)?t:new ti(t)}function hs(t){return rs(t)?t:new ti(t).saturate(.5).darken(.1).hexString()}const cs=["x","y","borderWidth","radius","tension"],ds=["color","borderColor","backgroundColor"];const us=new Map;function fs(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let s=us.get(i);return s||(s=new Intl.NumberFormat(t,e),us.set(i,s)),s}(e,i).format(t)}const gs={values:t=>ni(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const s=this.chart.options.locale;let n,o=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(n="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const a=ji(Math.abs(o)),r=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:n,minimumFractionDigits:r,maximumFractionDigits:r};return Object.assign(l,this.options.ticks.format),fs(t,s,l)},logarithmic(t,e,i){if(0===t)return"0";const s=i[e].significand||t/Math.pow(10,Math.floor(ji(t)));return[1,2,3,5,10,15].includes(s)||e>.8*i.length?gs.numeric.call(this,t,e,i):""}};var ps={formatters:gs};const ms=Object.create(null),xs=Object.create(null);function bs(t,e){if(!e)return t;const i=e.split(".");for(let s=0,n=i.length;s<n;++s){const e=i[s];t=t[e]||(t[e]=Object.create(null))}return t}function ys(t,e,i){return"string"==typeof e?mi(bs(t,e),i):mi(bs(t,""),e)}class _s{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>hs(e.backgroundColor),this.hoverBorderColor=(t,e)=>hs(e.borderColor),this.hoverColor=(t,e)=>hs(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ys(this,t,e)}get(t){return bs(this,t)}describe(t,e){return ys(xs,t,e)}override(t,e){return ys(ms,t,e)}route(t,e,i,s){const n=bs(this,t),o=bs(this,i),a="_"+e;Object.defineProperties(n,{[a]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[s];return oi(t)?Object.assign({},e,t):li(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach((t=>t(this)))}}var vs=new _s({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:ds},numbers:{type:"number",properties:cs}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ps.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ws(t,e,i,s,n){let o=e[n];return o||(o=e[n]=t.measureText(n).width,i.push(n)),o>s&&(s=o),s}function ks(t,e,i){const s=t.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((e-n)*s)/s+n}function Ms(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Ss(t,e,i,s){Cs(t,e,i,s,null)}function Cs(t,e,i,s,n){let o,a,r,l,h,c,d,u;const f=e.pointStyle,g=e.rotation,p=e.radius;let m=(g||0)*Pi;if(f&&"object"==typeof f&&(o=f.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,s),t.rotate(m),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void t.restore();if(!(isNaN(p)||p<=0)){switch(t.beginPath(),f){default:n?t.ellipse(i,s,n/2,p,0,0,Ci):t.arc(i,s,p,0,Ci),t.closePath();break;case"triangle":c=n?n/2:p,t.moveTo(i+Math.sin(m)*c,s-Math.cos(m)*p),m+=Oi,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*p),m+=Oi,t.lineTo(i+Math.sin(m)*c,s-Math.cos(m)*p),t.closePath();break;case"rectRounded":h=.516*p,l=p-h,a=Math.cos(m+Ii)*l,d=Math.cos(m+Ii)*(n?n/2-h:l),r=Math.sin(m+Ii)*l,u=Math.sin(m+Ii)*(n?n/2-h:l),t.arc(i-d,s-r,h,m-Si,m-Ti),t.arc(i+u,s-a,h,m-Ti,m),t.arc(i+d,s+r,h,m,m+Ti),t.arc(i-u,s+a,h,m+Ti,m+Si),t.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*p,c=n?n/2:l,t.rect(i-c,s-l,2*c,2*l);break}m+=Ii;case"rectRot":d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+u,s-a),t.lineTo(i+d,s+r),t.lineTo(i-u,s+a),t.closePath();break;case"crossRot":m+=Ii;case"cross":d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+d,s+r),t.moveTo(i+u,s-a),t.lineTo(i-u,s+a);break;case"star":d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+d,s+r),t.moveTo(i+u,s-a),t.lineTo(i-u,s+a),m+=Ii,d=Math.cos(m)*(n?n/2:p),a=Math.cos(m)*p,r=Math.sin(m)*p,u=Math.sin(m)*(n?n/2:p),t.moveTo(i-d,s-r),t.lineTo(i+d,s+r),t.moveTo(i+u,s-a),t.lineTo(i-u,s+a);break;case"line":a=n?n/2:Math.cos(m)*p,r=Math.sin(m)*p,t.moveTo(i-a,s-r),t.lineTo(i+a,s+r);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(m)*(n?n/2:p),s+Math.sin(m)*p);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Ds(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function As(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ps(t){t.restore()}function Ts(t,e,i,s,n){if(!e)return t.lineTo(i.x,i.y);if("middle"===n){const s=(e.x+i.x)/2;t.lineTo(s,e.y),t.lineTo(s,i.y)}else"after"===n!=!!s?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Is(t,e,i,s){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function Os(t,e,i,s,n){if(n.strikethrough||n.underline){const o=t.measureText(s),a=e-o.actualBoundingBoxLeft,r=e+o.actualBoundingBoxRight,l=i-o.actualBoundingBoxAscent,h=i+o.actualBoundingBoxDescent,c=n.strikethrough?(l+h)/2:h;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(a,c),t.lineTo(r,c),t.stroke()}}function js(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function Rs(t,e,i,s,n,o={}){const a=ni(e)?e:[e],r=o.strokeWidth>0&&""!==o.strokeColor;let l,h;for(t.save(),t.font=n.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),si(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<a.length;++l)h=a[l],o.backdrop&&js(t,o.backdrop),r&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),si(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(h,i,s,o.maxWidth)),t.fillText(h,i,s,o.maxWidth),Os(t,i,s,h,o),s+=Number(n.lineHeight);t.restore()}function Es(t,e){const{x:i,y:s,w:n,h:o,radius:a}=e;t.arc(i+a.topLeft,s+a.topLeft,a.topLeft,1.5*Si,Si,!0),t.lineTo(i,s+o-a.bottomLeft),t.arc(i+a.bottomLeft,s+o-a.bottomLeft,a.bottomLeft,Si,Ti,!0),t.lineTo(i+n-a.bottomRight,s+o),t.arc(i+n-a.bottomRight,s+o-a.bottomRight,a.bottomRight,Ti,0,!0),t.lineTo(i+n,s+a.topRight),t.arc(i+n-a.topRight,s+a.topRight,a.topRight,0,-Ti,!0),t.lineTo(i+a.topLeft,s)}const Ls=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,zs=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Ns(t,e){const i=(""+t).match(Ls);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}function Fs(t,e){const i={},s=oi(e),n=s?Object.keys(e):e,o=oi(t)?s?i=>li(t[i],t[e[i]]):e=>t[e]:()=>t;for(const a of n)i[a]=+o(a)||0;return i}function Bs(t){return Fs(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ws(t){return Fs(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Vs(t){const e=Bs(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Hs(t,e){t=t||{},e=e||vs.font;let i=li(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let s=li(t.style,e.style);s&&!(""+s).match(zs)&&(s=void 0);const n={family:li(t.family,e.family),lineHeight:Ns(li(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:li(t.weight,e.weight),string:""};return n.string=function(t){return!t||si(t.size)||si(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n}function $s(t,e,i,s){let n,o,a;for(n=0,o=t.length;n<o;++n)if(a=t[n],void 0!==a&&void 0!==a)return a}function Us(t,e){return Object.assign(Object.create(t),e)}function Ys(t,e=[""],i,s,n=()=>t[0]){const o=i||t;void 0===s&&(s=nn("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:n,override:i=>Ys([i,...t],e,o,s)};return new Proxy(a,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,s)=>Js(i,s,(()=>function(t,e,i,s){let n;for(const o of e)if(n=nn(Ks(o,t),i),void 0!==n)return Gs(t,n)?en(i,s,t,n):n}(s,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>on(t).includes(e),ownKeys:t=>on(t),set(t,e,i){const s=t._storage||(t._storage=n());return t[e]=s[e]=i,delete t._keys,!0}})}function qs(t,e,i,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:Xs(t,s),setContext:e=>qs(t,e,i,s),override:n=>qs(t.override(n),e,i,s)};return new Proxy(n,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>Js(t,e,(()=>function(t,e,i){const{_proxy:s,_context:n,_subProxy:o,_descriptors:a}=t;let r=s[e];ki(r)&&a.isScriptable(e)&&(r=function(t,e,i,s){const{_proxy:n,_context:o,_subProxy:a,_stack:r}=i;if(r.has(t))throw new Error("Recursion detected: "+Array.from(r).join("->")+"->"+t);r.add(t);let l=e(o,a||s);r.delete(t),Gs(t,l)&&(l=en(n._scopes,n,t,l));return l}(e,r,t,i));ni(r)&&r.length&&(r=function(t,e,i,s){const{_proxy:n,_context:o,_subProxy:a,_descriptors:r}=i;if(void 0!==o.index&&s(t))return e[o.index%e.length];if(oi(e[0])){const i=e,s=n._scopes.filter((t=>t!==i));e=[];for(const l of i){const i=en(s,n,t,l);e.push(qs(i,o,a&&a[t],r))}}return e}(e,r,t,a.isIndexable));Gs(e,r)&&(r=qs(r,n,o&&o[e],a));return r}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,s)=>(t[i]=s,delete e[i],!0)})}function Xs(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:i,indexable:s,isScriptable:ki(i)?i:()=>i,isIndexable:ki(s)?s:()=>s}}const Ks=(t,e)=>t?t+vi(e):e,Gs=(t,e)=>oi(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function Js(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const s=i();return t[e]=s,s}function Zs(t,e,i){return ki(t)?t(e,i):t}const Qs=(t,e)=>!0===t?e:"string"==typeof t?_i(e,t):void 0;function tn(t,e,i,s,n){for(const o of e){const e=Qs(i,o);if(e){t.add(e);const o=Zs(e._fallback,i,n);if(void 0!==o&&o!==i&&o!==s)return o}else if(!1===e&&void 0!==s&&i!==s)return null}return!1}function en(t,e,i,s){const n=e._rootScopes,o=Zs(e._fallback,i,s),a=[...t,...n],r=new Set;r.add(s);let l=sn(r,a,i,o||i,s);return null!==l&&((void 0===o||o===i||(l=sn(r,a,o,l,s),null!==l))&&Ys(Array.from(r),[""],n,o,(()=>function(t,e,i){const s=t._getTarget();e in s||(s[e]={});const n=s[e];if(ni(n)&&oi(i))return i;return n||{}}(e,i,s))))}function sn(t,e,i,s,n){for(;i;)i=tn(t,e,i,s,n);return i}function nn(t,e){for(const i of e){if(!i)continue;const e=i[t];if(void 0!==e)return e}}function on(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}const an=Number.EPSILON||1e-14,rn=(t,e)=>e<t.length&&!t[e].skip&&t[e],ln=t=>"x"===t?"y":"x";function hn(t,e,i,s){const n=t.skip?e:t,o=e,a=i.skip?e:i,r=Wi(o,n),l=Wi(a,o);let h=r/(r+l),c=l/(r+l);h=isNaN(h)?0:h,c=isNaN(c)?0:c;const d=s*h,u=s*c;return{previous:{x:o.x-d*(a.x-n.x),y:o.y-d*(a.y-n.y)},next:{x:o.x+u*(a.x-n.x),y:o.y+u*(a.y-n.y)}}}function cn(t,e="x"){const i=ln(e),s=t.length,n=Array(s).fill(0),o=Array(s);let a,r,l,h=rn(t,0);for(a=0;a<s;++a)if(r=l,l=h,h=rn(t,a+1),l){if(h){const t=h[e]-l[e];n[a]=0!==t?(h[i]-l[i])/t:0}o[a]=r?h?Ri(n[a-1])!==Ri(n[a])?0:(n[a-1]+n[a])/2:n[a-1]:n[a]}!function(t,e,i){const s=t.length;let n,o,a,r,l,h=rn(t,0);for(let c=0;c<s-1;++c)l=h,h=rn(t,c+1),l&&h&&(Ei(e[c],0,an)?i[c]=i[c+1]=0:(n=i[c]/e[c],o=i[c+1]/e[c],r=Math.pow(n,2)+Math.pow(o,2),r<=9||(a=3/Math.sqrt(r),i[c]=n*a*e[c],i[c+1]=o*a*e[c])))}(t,n,o),function(t,e,i="x"){const s=ln(i),n=t.length;let o,a,r,l=rn(t,0);for(let h=0;h<n;++h){if(a=r,r=l,l=rn(t,h+1),!r)continue;const n=r[i],c=r[s];a&&(o=(n-a[i])/3,r[`cp1${i}`]=n-o,r[`cp1${s}`]=c-o*e[h]),l&&(o=(l[i]-n)/3,r[`cp2${i}`]=n+o,r[`cp2${s}`]=c+o*e[h])}}(t,o,e)}function dn(t,e,i){return Math.max(Math.min(t,i),e)}function un(t,e,i,s,n){let o,a,r,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)cn(t,n);else{let i=s?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)r=t[o],l=hn(i,r,t[Math.min(o+1,a-(s?0:1))%a],e.tension),r.cp1x=l.previous.x,r.cp1y=l.previous.y,r.cp2x=l.next.x,r.cp2y=l.next.y,i=r}e.capBezierPoints&&function(t,e){let i,s,n,o,a,r=Ds(t[0],e);for(i=0,s=t.length;i<s;++i)a=o,o=r,r=i<s-1&&Ds(t[i+1],e),o&&(n=t[i],a&&(n.cp1x=dn(n.cp1x,e.left,e.right),n.cp1y=dn(n.cp1y,e.top,e.bottom)),r&&(n.cp2x=dn(n.cp2x,e.left,e.right),n.cp2y=dn(n.cp2y,e.top,e.bottom)))}(t,i)}function fn(){return"undefined"!=typeof window&&"undefined"!=typeof document}function gn(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function pn(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):s=t,s}const mn=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const xn=["top","right","bottom","left"];function bn(t,e,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const o=xn[n];s[o]=parseFloat(t[e+"-"+o+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function yn(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:s}=e,n=mn(i),o="border-box"===n.boxSizing,a=bn(n,"padding"),r=bn(n,"border","width"),{x:l,y:h,box:c}=function(t,e){const i=t.touches,s=i&&i.length?i[0]:t,{offsetX:n,offsetY:o}=s;let a,r,l=!1;if(((t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot))(n,o,t.target))a=n,r=o;else{const t=e.getBoundingClientRect();a=s.clientX-t.left,r=s.clientY-t.top,l=!0}return{x:a,y:r,box:l}}(t,i),d=a.left+(c&&r.left),u=a.top+(c&&r.top);let{width:f,height:g}=e;return o&&(f-=a.width+r.width,g-=a.height+r.height),{x:Math.round((l-d)/f*i.width/s),y:Math.round((h-u)/g*i.height/s)}}const _n=t=>Math.round(10*t)/10;function vn(t,e,i,s){const n=mn(t),o=bn(n,"margin"),a=pn(n.maxWidth,t,"clientWidth")||Ai,r=pn(n.maxHeight,t,"clientHeight")||Ai,l=function(t,e,i){let s,n;if(void 0===e||void 0===i){const o=t&&gn(t);if(o){const t=o.getBoundingClientRect(),a=mn(o),r=bn(a,"border","width"),l=bn(a,"padding");e=t.width-l.width-r.width,i=t.height-l.height-r.height,s=pn(a.maxWidth,o,"clientWidth"),n=pn(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:s||Ai,maxHeight:n||Ai}}(t,e,i);let{width:h,height:c}=l;if("content-box"===n.boxSizing){const t=bn(n,"border","width"),e=bn(n,"padding");h-=e.width+t.width,c-=e.height+t.height}h=Math.max(0,h-o.width),c=Math.max(0,s?h/s:c-o.height),h=_n(Math.min(h,a,l.maxWidth)),c=_n(Math.min(c,r,l.maxHeight)),h&&!c&&(c=_n(h/2));return(void 0!==e||void 0!==i)&&s&&l.height&&c>l.height&&(c=l.height,h=_n(Math.floor(c*s))),{width:h,height:c}}function wn(t,e,i){const s=e||1,n=Math.floor(t.height*s),o=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(i||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||a.height!==n||a.width!==o)&&(t.currentDevicePixelRatio=s,a.height=n,a.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0)}const kn=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};fn()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(e){}return t}();function Mn(t,e){const i=function(t,e){return mn(t).getPropertyValue(e)}(t,e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Sn(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Cn(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:"middle"===s?i<.5?t.y:e.y:"after"===s?i<1?t.y:e.y:i>0?e.y:t.y}}function Dn(t,e,i,s){const n={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=Sn(t,n,i),r=Sn(n,o,i),l=Sn(o,e,i),h=Sn(a,r,i),c=Sn(r,l,i);return Sn(h,c,i)}function An(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Pn(t,e){let i,s;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=s)}function Tn(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function In(t){return"angle"===t?{between:$i,compare:Vi,normalize:Hi}:{between:Yi,compare:(t,e)=>t-e,normalize:t=>t}}function On({start:t,end:e,count:i,loop:s,style:n}){return{start:t%i,end:e%i,loop:s&&(e-t+1)%i==0,style:n}}function jn(t,e,i){if(!i)return[t];const{property:s,start:n,end:o}=i,a=e.length,{compare:r,between:l,normalize:h}=In(s),{start:c,end:d,loop:u,style:f}=function(t,e,i){const{property:s,start:n,end:o}=i,{between:a,normalize:r}=In(s),l=e.length;let h,c,{start:d,end:u,loop:f}=t;if(f){for(d+=l,u+=l,h=0,c=l;h<c&&a(r(e[d%l][s]),n,o);++h)d--,u--;d%=l,u%=l}return u<d&&(u+=l),{start:d,end:u,loop:f,style:t.style}}(t,e,i),g=[];let p,m,x,b=!1,y=null;const _=()=>b||l(n,x,p)&&0!==r(n,x),v=()=>!b||0===r(o,p)||l(o,x,p);for(let w=c,k=c;w<=d;++w)m=e[w%a],m.skip||(p=h(m[s]),p!==x&&(b=l(p,n,o),null===y&&_()&&(y=0===r(p,n)?w:k),null!==y&&v()&&(g.push(On({start:y,end:w,loop:u,count:a,style:f})),y=null),k=w,x=p));return null!==y&&g.push(On({start:y,end:d,loop:u,count:a,style:f})),g}function Rn(t,e,i,s){return s&&s.setContext&&i?function(t,e,i,s){const n=t._chart.getContext(),o=En(t.options),{_datasetIndex:a,options:{spanGaps:r}}=t,l=i.length,h=[];let c=o,d=e[0].start,u=d;function f(t,e,s,n){const o=r?-1:1;if(t!==e){for(t+=l;i[t%l].skip;)t-=o;for(;i[e%l].skip;)e+=o;t%l!=e%l&&(h.push({start:t%l,end:e%l,loop:s,style:n}),c=n,d=e%l)}}for(const g of e){d=r?d:g.start;let t,e=i[d%l];for(u=d+1;u<=g.end;u++){const o=i[u%l];t=En(s.setContext(Us(n,{type:"segment",p0:e,p1:o,p0DataIndex:(u-1)%l,p1DataIndex:u%l,datasetIndex:a}))),Ln(t,c)&&f(d,u-1,g.loop,c),e=o,c=t}d<u-1&&f(d,u-1,g.loop,c)}return h}(t,e,i,s):e}function En(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Ln(t,e){if(!e)return!1;const i=[],s=function(t,e){return rs(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,s)!==JSON.stringify(e,s)}
/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class zn{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const n=e.listeners[s],o=e.duration;n.forEach((s=>s({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=Qi.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,s)=>{if(!i.running||!i.items.length)return;const n=i.items;let o,a=n.length-1,r=!1;for(;a>=0;--a)o=n[a],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),r=!0):(n[a]=n[n.length-1],n.pop());r&&(s.draw(),this._notify(s,i,t,"progress")),n.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=n.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Nn=new zn;const Fn="transparent",Bn={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const s=ls(t||Fn),n=s.valid&&ls(e||Fn);return n&&n.valid?n.mix(s,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class Wn{constructor(t,e,i,s){const n=e[i];s=$s([t.to,s,n,t.from]);const o=$s([t.from,n,s]);this._active=!0,this._fn=t.fn||Bn[t.type||typeof o],this._easing=as[t.easing]||as.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],n=i-this._start,o=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=$s([t.to,e,s,t.from]),this._from=$s([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,n=this._from,o=this._loop,a=this._to;let r;if(this._active=n!==a&&(o||e<i),!this._active)return this._target[s]=a,void this._notify(!0);e<0?this._target[s]=n:(r=e/i%2,r=o&&r>1?2-r:r,r=this._easing(Math.min(1,Math.max(0,r))),this._target[s]=this._fn(n,a,r))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let s=0;s<i.length;s++)i[s][e]()}}class Vn{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!oi(t))return;const e=Object.keys(vs.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach((s=>{const n=t[s];if(!oi(n))return;const o={};for(const t of e)o[t]=n[t];(ni(n.properties)&&n.properties||[s]).forEach((t=>{t!==s&&i.has(t)||i.set(t,o)}))}))}_animateOptions(t,e){const i=e.options,s=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!s)return[];const n=this._createAnimations(s,i);return i.$shared&&function(t,e){const i=[],s=Object.keys(e);for(let n=0;n<s.length;n++){const e=t[s[n]];e&&e.active()&&i.push(e.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),n}_createAnimations(t,e){const i=this._properties,s=[],n=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let r;for(r=o.length-1;r>=0;--r){const l=o[r];if("$"===l.charAt(0))continue;if("options"===l){s.push(...this._animateOptions(t,e));continue}const h=e[l];let c=n[l];const d=i.get(l);if(c){if(d&&c.active()){c.update(d,h,a);continue}c.cancel()}d&&d.duration?(n[l]=c=new Wn(d,t,l,h),s.push(c)):t[l]=h}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(Nn.add(this._chart,i),!0):void 0}}function Hn(t,e){const i=t&&t.options||{},s=i.reverse,n=void 0===i.min?e:0,o=void 0===i.max?e:0;return{start:s?o:n,end:s?n:o}}function $n(t,e){const i=[],s=t._getSortedDatasetMetas(e);let n,o;for(n=0,o=s.length;n<o;++n)i.push(s[n].index);return i}function Un(t,e,i,s={}){const n=t.keys,o="single"===s.mode;let a,r,l,h;if(null===e)return;let c=!1;for(a=0,r=n.length;a<r;++a){if(l=+n[a],l===i){if(c=!0,s.all)continue;break}h=t.values[l],ai(h)&&(o||0===e||Ri(e)===Ri(h))&&(e+=h)}return c||s.all?e:0}function Yn(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function qn(t,e,i){const s=t[e]||(t[e]={});return s[i]||(s[i]={})}function Xn(t,e,i,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function Kn(t,e){const{chart:i,_cachedMeta:s}=t,n=i._stacks||(i._stacks={}),{iScale:o,vScale:a,index:r}=s,l=o.axis,h=a.axis,c=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(o,a,s),d=e.length;let u;for(let f=0;f<d;++f){const t=e[f],{[l]:i,[h]:o}=t;u=(t._stacks||(t._stacks={}))[h]=qn(n,c,i),u[r]=o,u._top=Xn(u,a,!0,s.type),u._bottom=Xn(u,a,!1,s.type);(u._visualValues||(u._visualValues={}))[r]=o}}function Gn(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function Jn(t,e){const i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[s]||void 0===e[s][i])return;delete e[s][i],void 0!==e[s]._visualValues&&void 0!==e[s]._visualValues[i]&&delete e[s]._visualValues[i]}}}const Zn=t=>"reset"===t||"none"===t,Qn=(t,e)=>e?t:Object.assign({},t);class to{constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Yn(t.vScale,t),this.addElements(),this.options.fill&&this.chart.isPluginEnabled("filler")}updateIndex(t){this.index!==t&&Jn(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(t,e,i,s)=>"x"===t?e:"r"===t?s:i,n=e.xAxisID=li(i.xAxisID,Gn(t,"x")),o=e.yAxisID=li(i.yAxisID,Gn(t,"y")),a=e.rAxisID=li(i.rAxisID,Gn(t,"r")),r=e.indexAxis,l=e.iAxisID=s(r,n,o,a),h=e.vAxisID=s(r,o,n,a);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&Ji(this._data,this),t._stacked&&Jn(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(oi(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:i,vScale:s}=e,n="x"===i.axis?"x":"y",o="x"===s.axis?"x":"y",a=Object.keys(t),r=new Array(a.length);let l,h,c;for(l=0,h=a.length;l<h;++l)c=a[l],r[l]={[n]:c,[o]:t[c]};return r}(e,t)}else if(i!==e){if(i){Ji(i,this);const t=this._cachedMeta;Jn(t),t._parsed=[]}e&&Object.isExtensible(e)&&(n=this,(s=e)._chartjs?s._chartjs.listeners.push(n):(Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),Gi.forEach((t=>{const e="_onData"+vi(t),i=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...t){const n=i.apply(this,t);return s._chartjs.listeners.forEach((i=>{"function"==typeof i[e]&&i[e](...t)})),n}})})))),this._syncList=[],this._data=e}var s,n}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const n=e._stacked;e._stacked=Yn(e.vScale,e),e.stack!==i.stack&&(s=!0,Jn(e),e.stack=i.stack),this._resyncElements(t),(s||n!==e._stacked)&&(Kn(this,e._parsed),e._stacked=Yn(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:n,_stacked:o}=i,a=n.axis;let r,l,h,c=0===t&&e===s.length||i._sorted,d=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,h=s;else{h=ni(s[t])?this.parseArrayData(i,s,t,e):oi(s[t])?this.parseObjectData(i,s,t,e):this.parsePrimitiveData(i,s,t,e);const n=()=>null===l[a]||d&&l[a]<d[a];for(r=0;r<e;++r)i._parsed[r+t]=l=h[r],c&&(n()&&(c=!1),d=l);i._sorted=c}o&&Kn(this,h)}parsePrimitiveData(t,e,i,s){const{iScale:n,vScale:o}=t,a=n.axis,r=o.axis,l=n.getLabels(),h=n===o,c=new Array(s);let d,u,f;for(d=0,u=s;d<u;++d)f=d+i,c[d]={[a]:h||n.parse(l[f],f),[r]:o.parse(e[f],f)};return c}parseArrayData(t,e,i,s){const{xScale:n,yScale:o}=t,a=new Array(s);let r,l,h,c;for(r=0,l=s;r<l;++r)h=r+i,c=e[h],a[r]={x:n.parse(c[0],h),y:o.parse(c[1],h)};return a}parseObjectData(t,e,i,s){const{xScale:n,yScale:o}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l=new Array(s);let h,c,d,u;for(h=0,c=s;h<c;++h)d=h+i,u=e[d],l[h]={x:n.parse(_i(u,a),d),y:o.parse(_i(u,r),d)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,n=this._cachedMeta,o=e[t.axis];return Un({keys:$n(s,!0),values:e._stacks[t.axis]._visualValues},o,n.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const n=i[e.axis];let o=null===n?NaN:n;const a=s&&i._stacks[e.axis];s&&a&&(s.values=a,o=Un(s,n,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,n=i._sorted&&t===i.iScale,o=s.length,a=this._getOtherScale(t),r=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:$n(i,!0),values:null})(e,i,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:c}=function(t){const{min:e,max:i,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}(a);let d,u;function f(){u=s[d];const e=u[a.axis];return!ai(u[t.axis])||h>e||c<e}for(d=0;d<o&&(f()||(this.updateRangeFromParsed(l,t,u,r),!n));++d);if(n)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(l,t,u,r);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,n,o;for(s=0,n=e.length;s<n;++s)o=e[s][t.axis],ai(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,n=this.getParsed(t);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,s,n;return oi(t)?(e=t.top,i=t.right,s=t.bottom,n=t.left):e=i=s=n=t,{top:e,right:i,bottom:s,left:n,disabled:!1===t}}(li(this.options.clip,function(t,e,i){if(!1===i)return!1;const s=Hn(t,i),n=Hn(e,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],n=e.chartArea,o=[],a=this._drawStart||0,r=this._drawCount||s.length-a,l=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(t,n,a,r),h=a;h<a+r;++h){const e=s[h];e.hidden||(e.active&&l?o.push(e):e.draw(t,n))}for(h=0;h<o.length;++h)o[h].draw(t,n)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];n=e.$context||(e.$context=function(t,e,i){return Us(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),n.parsed=this.getParsed(t),n.raw=s.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=function(t,e){return Us(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=i,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s="active"===e,n=this._cachedDataOpts,o=t+"-"+e,a=n[o],r=this.enableOptionSharing&&wi(i);if(a)return Qn(a,r);const l=this.chart.config,h=l.datasetElementScopeKeys(this._type,t),c=s?[`${t}Hover`,"hover",t,""]:[t,""],d=l.getOptionScopes(this.getDataset(),h),u=Object.keys(vs.elements[t]),f=l.resolveNamedOptions(d,u,(()=>this.getContext(i,s,e)),c);return f.$shared&&(f.$shared=r,n[o]=Object.freeze(Qn(f,r))),f}_resolveAnimations(t,e,i){const s=this.chart,n=this._cachedDataOpts,o=`animation-${e}`,a=n[o];if(a)return a;let r;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,e),o=s.getOptionScopes(this.getDataset(),n);r=s.createResolver(o,this.getContext(t,i,e))}const l=new Vn(s,r&&r.animations);return r&&r._cacheable&&(n[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Zn(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,n=this.getSharedOptions(i),o=this.includeOptions(e,n)||n!==s;return this.updateSharedOptions(n,e,i),{sharedOptions:n,includeOptions:o}}updateElement(t,e,i,s){Zn(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!Zn(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const n=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[a,r,l]of this._syncList)this[a](r,l);this._syncList=[];const s=i.length,n=e.length,o=Math.min(n,s);o&&this.parse(0,o),n>s?this._insertElements(s,n-s,t):n<s&&this._removeElements(n,s-n)}_insertElements(t,e,i=!0){const s=this._cachedMeta,n=s.data,o=t+e;let a;const r=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(r(n),a=t;a<o;++a)n[a]=new this.dataElementType;this._parsing&&r(s._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&Jn(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function eo(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let s=[];for(let e=0,n=i.length;e<n;e++)s=s.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=Zi(s.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let s,n,o,a,r=e._length;const l=()=>{32767!==o&&-32768!==o&&(wi(a)&&(r=Math.min(r,Math.abs(o-a)||r)),a=o)};for(s=0,n=i.length;s<n;++s)o=e.getPixelForValue(i[s]),l();for(a=void 0,s=0,n=e.ticks.length;s<n;++s)o=e.getPixelForTick(s),l();return r}function io(t,e,i,s){return ni(t)?function(t,e,i,s){const n=i.parse(t[0],s),o=i.parse(t[1],s),a=Math.min(n,o),r=Math.max(n,o);let l=a,h=r;Math.abs(a)>Math.abs(r)&&(l=r,h=a),e[i.axis]=h,e._custom={barStart:l,barEnd:h,start:n,end:o,min:a,max:r}}(t,e,i,s):e[i.axis]=i.parse(t,s),e}function so(t,e,i,s){const n=t.iScale,o=t.vScale,a=n.getLabels(),r=n===o,l=[];let h,c,d,u;for(h=i,c=i+s;h<c;++h)u=e[h],d={},d[n.axis]=r||n.parse(a[h],h),l.push(io(u,d,o,h));return l}function no(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function oo(t,e,i,s){let n=e.borderSkipped;const o={};if(!n)return void(t.borderSkipped=o);if(!0===n)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:r,reverse:l,top:h,bottom:c}=function(t){let e,i,s,n,o;return t.horizontal?(e=t.base>t.x,i="left",s="right"):(e=t.base<t.y,i="bottom",s="top"),e?(n="end",o="start"):(n="start",o="end"),{start:i,end:s,reverse:e,top:n,bottom:o}}(t);"middle"===n&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?n=h:(i._bottom||0)===s?n=c:(o[ao(c,a,r,l)]=!0,n=h)),o[ao(n,a,r,l)]=!0,t.borderSkipped=o}function ao(t,e,i,s){var n,o,a;return s?(a=i,t=ro(t=(n=t)===(o=e)?a:n===a?o:n,i,e)):t=ro(t,e,i),t}function ro(t,e,i){return"start"===t?e:"end"===t?i:t}function lo(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}i(to,"defaults",{}),i(to,"datasetElementType",null),i(to,"dataElementType",null);class ho extends to{parsePrimitiveData(t,e,i,s){return so(t,e,i,s)}parseArrayData(t,e,i,s){return so(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:n,vScale:o}=t,{xAxisKey:a="x",yAxisKey:r="y"}=this._parsing,l="x"===n.axis?a:r,h="x"===o.axis?a:r,c=[];let d,u,f,g;for(d=i,u=i+s;d<u;++d)g=e[d],f={},f[n.axis]=n.parse(_i(g,l),d),c.push(io(_i(g,h),f,o,d));return c}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const n=i._custom;n&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,n=this.getParsed(t),o=n._custom,a=no(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const n="reset"===s,{index:o,_cachedMeta:{vScale:a}}=this,r=a.getBasePixel(),l=a.isHorizontal(),h=this._getRuler(),{sharedOptions:c,includeOptions:d}=this._getSharedOptions(e,s);for(let u=e;u<e+i;u++){const e=this.getParsed(u),i=n||si(e[a.axis])?{base:r,head:r}:this._calculateBarValuePixels(u),f=this._calculateBarIndexPixels(u,h),g=(e._stacks||{})[a.axis],p={horizontal:l,base:i.base,enableBorderRadius:!g||no(e._custom)||o===g._top||o===g._bottom,x:l?i.head:f.center,y:l?f.center:i.head,height:l?f.size:Math.abs(i.size),width:l?Math.abs(i.size):f.size};d&&(p.options=c||this.resolveDataElementOptions(u,t[u].active?"active":s));const m=p.options||t[u].options;oo(p,m,g,o),lo(p,m,h.ratio),this.updateElement(t[u],u,p,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),n=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),r=a&&a[i.axis],l=t=>{const e=t._parsed.find((t=>t[i.axis]===r)),s=e&&e[t.vScale.axis];if(si(s)||isNaN(s))return!0};for(const h of s)if((void 0===e||!l(h))&&((!1===n||-1===o.indexOf(h.stack)||void 0===n&&void 0===h.stack)&&o.push(h.stack),h.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),n=void 0!==e?s.indexOf(e):-1;return-1===n?s.length-1:n}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let n,o;for(n=0,o=e.data.length;n<o;++n)s.push(i.getPixelForValue(this.getParsed(n)[i.axis],n));const a=t.barThickness;return{min:a||eo(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:n,minBarLength:o}}=this,a=n||0,r=this.getParsed(t),l=r._custom,h=no(l);let c,d,u=r[e.axis],f=0,g=i?this.applyStack(e,r,i):u;g!==u&&(f=g-u,g=u),h&&(u=l.barStart,g=l.barEnd-l.barStart,0!==u&&Ri(u)!==Ri(l.barEnd)&&(f=0),f+=u);const p=si(n)||h?f:n;let m=e.getPixelForValue(p);if(c=this.chart.getDataVisibility(t)?e.getPixelForValue(f+g):m,d=c-m,Math.abs(d)<o){d=function(t,e,i){return 0!==t?Ri(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(d,e,a)*o,u===a&&(m-=d/2);const t=e.getPixelForDecimal(0),n=e.getPixelForDecimal(1),l=Math.min(t,n),f=Math.max(t,n);m=Math.max(Math.min(m,f),l),c=m+d,i&&!h&&(r._stacks[e.axis]._visualValues[s]=e.getValueForPixel(c)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=Ri(d)*e.getLineWidthForValue(a)/2;m+=t,d-=t}return{size:d,base:m,head:c,center:c+d/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,n=s.skipNull,o=li(s.maxBarThickness,1/0);let a,r;if(e.grouped){const i=n?this._getStackCount(t):e.stackCount,l="flex"===s.barThickness?function(t,e,i,s){const n=e.pixels,o=n[t];let a=t>0?n[t-1]:null,r=t<n.length-1?n[t+1]:null;const l=i.categoryPercentage;null===a&&(a=o-(null===r?e.end-e.start:r-o)),null===r&&(r=o+o-a);const h=o-(o-Math.min(a,r))/2*l;return{chunk:Math.abs(r-a)/2*l/s,ratio:i.barPercentage,start:h}}(t,e,s,i):function(t,e,i,s){const n=i.barThickness;let o,a;return si(n)?(o=e.min*i.categoryPercentage,a=i.barPercentage):(o=n*s,a=1),{chunk:o/s,ratio:a,start:e.pixels[t]-o/2}}(t,e,s,i),h=this._getStackIndex(this.index,this._cachedMeta.stack,n?t:void 0);a=l.start+l.chunk*h+l.chunk/2,r=Math.min(o,l.chunk*l.ratio)}else a=i.getPixelForValue(this.getParsed(t)[i.axis],t),r=Math.min(o,e.min*e.ratio);return{base:a-r/2,head:a+r/2,center:a,size:r}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let n=0;for(;n<s;++n)null===this.getParsed(n)[e.axis]||i[n].hidden||i[n].draw(this._ctx)}}i(ho,"id","bar"),i(ho,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),i(ho,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class co extends to{constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let n,o,a=t=>+i[t];if(oi(i[t])){const{key:t="value"}=this._parsing;a=e=>+_i(i[e],t)}for(n=t,o=t+e;n<o;++n)s._parsed[n]=a(n)}}_getRotation(){return Ni(this.options.rotation-90)}_getCircumference(){return Ni(this.options.circumference)}_getRotationExtents(){let t=Ci,e=-Ci;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,n=s._getRotation(),o=s._getCircumference();t=Math.min(t,n),e=Math.max(e,n+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,n=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,a=Math.max((Math.min(i.width,i.height)-o)/2,0),r=Math.min((l=this.options.cutout,h=a,"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/h),1);var l,h;const c=this._getRingWeight(this.index),{circumference:d,rotation:u}=this._getRotationExtents(),{ratioX:f,ratioY:g,offsetX:p,offsetY:m}=function(t,e,i){let s=1,n=1,o=0,a=0;if(e<Ci){const r=t,l=r+e,h=Math.cos(r),c=Math.sin(r),d=Math.cos(l),u=Math.sin(l),f=(t,e,s)=>$i(t,r,l,!0)?1:Math.max(e,e*i,s,s*i),g=(t,e,s)=>$i(t,r,l,!0)?-1:Math.min(e,e*i,s,s*i),p=f(0,h,d),m=f(Ti,c,u),x=g(Si,h,d),b=g(Si+Ti,c,u);s=(p-x)/2,n=(m-b)/2,o=-(p+x)/2,a=-(m+b)/2}return{ratioX:s,ratioY:n,offsetX:o,offsetY:a}}(u,d,r),x=(i.width-o)/f,b=(i.height-o)/g,y=Math.max(Math.min(x,b)/2,0),_=hi(this.options.radius,y),v=(_-Math.max(_*r,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*_,this.offsetY=m*_,s.total=this.calculateTotal(),this.outerRadius=_-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*c,0),this.updateElements(n,0,n.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,n=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*n/Ci)}updateElements(t,e,i,s){const n="reset"===s,o=this.chart,a=o.chartArea,r=o.options.animation,l=(a.left+a.right)/2,h=(a.top+a.bottom)/2,c=n&&r.animateScale,d=c?0:this.innerRadius,u=c?0:this.outerRadius,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(e,s);let p,m=this._getRotation();for(p=0;p<e;++p)m+=this._circumference(p,n);for(p=e;p<e+i;++p){const e=this._circumference(p,n),i=t[p],o={x:l+this.offsetX,y:h+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:u,innerRadius:d};g&&(o.options=f||this.resolveDataElementOptions(p,i.active?"active":s)),m+=e,this.updateElement(i,p,o,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,s=0;for(i=0;i<e.length;i++){const n=t._parsed[i];null===n||isNaN(n)||!this.chart.getDataVisibility(i)||e[i].hidden||(s+=Math.abs(n))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Ci*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],n=fs(e._parsed[t],i.options.locale);return{label:s[t]||"",value:n}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,n,o,a,r;if(!t)for(s=0,n=i.data.datasets.length;s<n;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,a=o.controller;break}if(!t)return 0;for(s=0,n=t.length;s<n;++s)r=a.resolveDataElementOptions(s),"inner"!==r.borderAlign&&(e=Math.max(e,r.borderWidth||0,r.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(li(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}i(co,"id","doughnut"),i(co,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),i(co,"descriptors",{_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")}),i(co,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:s,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}});class uo extends to{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:n}=e,o=this.chart._animationsDisabled;let{start:a,count:r}=function(t,e,i){const s=e.length;let n=0,o=s;if(t._sorted){const{iScale:a,_parsed:r}=t,l=a.axis,{min:h,max:c,minDefined:d,maxDefined:u}=a.getUserBounds();d&&(n=Ui(Math.min(Xi(r,l,h).lo,i?s:Xi(e,l,a.getPixelForValue(h)).lo),0,s-1)),o=u?Ui(Math.max(Xi(r,a.axis,c,!0).hi+1,i?0:Xi(e,l,a.getPixelForValue(c),!0).hi+1),n,s)-n:s-n}return{start:n,count:o}}(e,s,o);this._drawStart=a,this._drawCount=r,function(t){const{xScale:e,yScale:i,_scaleRanges:s}=t,n={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!s)return t._scaleRanges=n,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,n),o}(e)&&(a=0,r=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!n._decimated,i.points=s;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:l},t),this.updateElements(s,a,r,t)}updateElements(t,e,i,s){const n="reset"===s,{iScale:o,vScale:a,_stacked:r,_dataset:l}=this._cachedMeta,{sharedOptions:h,includeOptions:c}=this._getSharedOptions(e,s),d=o.axis,u=a.axis,{spanGaps:f,segment:g}=this.options,p=zi(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||n||"none"===s,x=e+i,b=t.length;let y=e>0&&this.getParsed(e-1);for(let _=0;_<b;++_){const i=t[_],f=m?i:{};if(_<e||_>=x){f.skip=!0;continue}const b=this.getParsed(_),v=si(b[u]),w=f[d]=o.getPixelForValue(b[d],_),k=f[u]=n||v?a.getBasePixel():a.getPixelForValue(r?this.applyStack(a,b,r):b[u],_);f.skip=isNaN(w)||isNaN(k)||v,f.stop=_>0&&Math.abs(b[d]-y[d])>p,g&&(f.parsed=b,f.raw=l.data[_]),c&&(f.options=h||this.resolveDataElementOptions(_,i.active?"active":s)),m||this.updateElement(i,_,f,s),y=b}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,n,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}i(uo,"id","line"),i(uo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),i(uo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class fo extends co{}function go(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}i(fo,"id","pie"),i(fo,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class po{constructor(t){i(this,"options"),this.options=t||{}}static override(t){Object.assign(po.prototype,t)}init(){}formats(){return go()}parse(){return go()}format(){return go()}add(){return go()}diff(){return go()}startOf(){return go()}endOf(){return go()}}var mo=po;function xo(t,e,i,s){const{controller:n,data:o,_sorted:a}=t,r=n._cachedMeta.iScale;if(r&&e===r.axis&&"r"!==e&&a&&o.length){const t=r._reversePixels?Ki:Xi;if(!s)return t(o,e,i);if(n._sharedOptions){const s=o[0],n="function"==typeof s.getRange&&s.getRange(e);if(n){const s=t(o,e,i-n),a=t(o,e,i+n);return{lo:s.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function bo(t,e,i,s,n){const o=t.getSortedVisibleDatasetMetas(),a=i[e];for(let r=0,l=o.length;r<l;++r){const{index:t,data:i}=o[r],{lo:l,hi:h}=xo(o[r],e,a,n);for(let e=l;e<=h;++e){const n=i[e];n.skip||s(n,t,e)}}}function yo(t,e,i,s,n){const o=[];if(!n&&!t.isPointInArea(e))return o;return bo(t,i,e,(function(i,a,r){(n||Ds(i,t.chartArea,0))&&i.inRange(e.x,e.y,s)&&o.push({element:i,datasetIndex:a,index:r})}),!0),o}function _o(t,e,i,s,n,o){let a=[];const r=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,s){const n=e?Math.abs(t.x-s.x):0,o=i?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(i);let l=Number.POSITIVE_INFINITY;return bo(t,i,e,(function(i,h,c){const d=i.inRange(e.x,e.y,n);if(s&&!d)return;const u=i.getCenterPoint(n);if(!(!!o||t.isPointInArea(u))&&!d)return;const f=r(e,u);f<l?(a=[{element:i,datasetIndex:h,index:c}],l=f):f===l&&a.push({element:i,datasetIndex:h,index:c})})),a}function vo(t,e,i,s,n,o){return o||t.isPointInArea(e)?"r"!==i||s?_o(t,e,i,s,n,o):function(t,e,i,s){let n=[];return bo(t,i,e,(function(t,i,o){const{startAngle:a,endAngle:r}=t.getProps(["startAngle","endAngle"],s),{angle:l}=Bi(t,{x:e.x,y:e.y});$i(l,a,r)&&n.push({element:t,datasetIndex:i,index:o})})),n}(t,e,i,n):[]}function wo(t,e,i,s,n){const o=[],a="x"===i?"inXRange":"inYRange";let r=!1;return bo(t,i,e,((t,s,l)=>{t[a]&&t[a](e[i],n)&&(o.push({element:t,datasetIndex:s,index:l}),r=r||t.inRange(e.x,e.y,n))})),s&&!r?[]:o}var ko={evaluateInteractionItems:bo,modes:{index(t,e,i,s){const n=yn(e,t),o=i.axis||"x",a=i.includeInvisible||!1,r=i.intersect?yo(t,n,o,s,a):vo(t,n,o,!1,s,a),l=[];return r.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=r[0].index,i=t.data[e];i&&!i.skip&&l.push({element:i,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,i,s){const n=yn(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;let r=i.intersect?yo(t,n,o,s,a):vo(t,n,o,!1,s,a);if(r.length>0){const e=r[0].datasetIndex,i=t.getDatasetMeta(e).data;r=[];for(let t=0;t<i.length;++t)r.push({element:i[t],datasetIndex:e,index:t})}return r},point:(t,e,i,s)=>yo(t,yn(e,t),i.axis||"xy",s,i.includeInvisible||!1),nearest(t,e,i,s){const n=yn(e,t),o=i.axis||"xy",a=i.includeInvisible||!1;return vo(t,n,o,i.intersect,s,a)},x:(t,e,i,s)=>wo(t,yn(e,t),"x",i.intersect,s),y:(t,e,i,s)=>wo(t,yn(e,t),"y",i.intersect,s)}};const Mo=["left","top","right","bottom"];function So(t,e){return t.filter((t=>t.pos===e))}function Co(t,e){return t.filter((t=>-1===Mo.indexOf(t.pos)&&t.box.axis===e))}function Do(t,e){return t.sort(((t,i)=>{const s=e?i:t,n=e?t:i;return s.weight===n.weight?s.index-n.index:s.weight-n.weight}))}function Ao(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:s,stackWeight:n}=i;if(!t||!Mo.includes(s))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let o,a,r;for(o=0,a=t.length;o<a;++o){r=t[o];const{fullSize:a}=r.box,l=i[r.stack],h=l&&r.stackWeight/l.weight;r.horizontal?(r.width=h?h*s:a&&e.availableWidth,r.height=n):(r.width=s,r.height=h?h*n:a&&e.availableHeight)}return i}function Po(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function To(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Io(t,e,i,s){const{pos:n,box:o}=i,a=t.maxPadding;if(!oi(n)){i.size&&(t[n]-=i.size);const e=s[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?o.height:o.width),i.size=e.size/e.count,t[n]+=i.size}o.getPadding&&To(a,o.getPadding());const r=Math.max(0,e.outerWidth-Po(a,t,"left","right")),l=Math.max(0,e.outerHeight-Po(a,t,"top","bottom")),h=r!==t.w,c=l!==t.h;return t.w=r,t.h=l,i.horizontal?{same:h,other:c}:{same:c,other:h}}function Oo(t,e){const i=e.maxPadding;function s(t){const s={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{s[t]=Math.max(e[t],i[t])})),s}return s(t?["left","right"]:["top","bottom"])}function jo(t,e,i,s){const n=[];let o,a,r,l,h,c;for(o=0,a=t.length,h=0;o<a;++o){r=t[o],l=r.box,l.update(r.width||e.w,r.height||e.h,Oo(r.horizontal,e));const{same:a,other:d}=Io(e,i,r,s);h|=a&&n.length,c=c||d,l.fullSize||n.push(r)}return h&&jo(n,e,i,s)||c}function Ro(t,e,i,s,n){t.top=i,t.left=e,t.right=e+s,t.bottom=i+n,t.width=s,t.height=n}function Eo(t,e,i,s){const n=i.padding;let{x:o,y:a}=e;for(const r of t){const t=r.box,l=s[r.stack]||{count:1,placed:0,weight:1},h=r.stackWeight/l.weight||1;if(r.horizontal){const s=e.w*h,o=l.size||t.height;wi(l.start)&&(a=l.start),t.fullSize?Ro(t,n.left,a,i.outerWidth-n.right-n.left,o):Ro(t,e.left+l.placed,a,s,o),l.start=a,l.placed+=s,a=t.bottom}else{const s=e.h*h,a=l.size||t.width;wi(l.start)&&(o=l.start),t.fullSize?Ro(t,o,n.top,a,i.outerHeight-n.bottom-n.top):Ro(t,o,e.top+l.placed,a,s),l.start=o,l.placed+=s,o=t.right}}e.x=o,e.y=a}var Lo={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){if(!t)return;const n=Vs(t.options.layout.padding),o=Math.max(e-n.width,0),a=Math.max(i-n.height,0),r=function(t){const e=function(t){const e=[];let i,s,n,o,a,r;for(i=0,s=(t||[]).length;i<s;++i)n=t[i],({position:o,options:{stack:a,stackWeight:r=1}}=n),e.push({index:i,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:a&&o+a,stackWeight:r});return e}(t),i=Do(e.filter((t=>t.box.fullSize)),!0),s=Do(So(e,"left"),!0),n=Do(So(e,"right")),o=Do(So(e,"top"),!0),a=Do(So(e,"bottom")),r=Co(e,"x"),l=Co(e,"y");return{fullSize:i,leftAndTop:s.concat(o),rightAndBottom:n.concat(l).concat(a).concat(r),chartArea:So(e,"chartArea"),vertical:s.concat(n).concat(l),horizontal:o.concat(a).concat(r)}}(t.boxes),l=r.vertical,h=r.horizontal;di(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const c=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,d=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/c,hBoxMaxHeight:a/2}),u=Object.assign({},n);To(u,Vs(s));const f=Object.assign({maxPadding:u,w:o,h:a,x:n.left,y:n.top},n),g=Ao(l.concat(h),d);jo(r.fullSize,f,d,g),jo(l,f,d,g),jo(h,f,d,g)&&jo(l,f,d,g),function(t){const e=t.maxPadding;function i(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(f),Eo(r.leftAndTop,f,d,g),f.x+=f.w,f.y+=f.h,Eo(r.rightAndBottom,f,d,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},di(r.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class zo{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class No extends zo{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Fo="$chartjs",Bo={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Wo=t=>null===t||""===t;const Vo=!!kn&&{passive:!0};function Ho(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,Vo)}function $o(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function Uo(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||$o(i.addedNodes,s),e=e&&!$o(i.removedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}function Yo(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||$o(i.removedNodes,s),e=e&&!$o(i.addedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}const qo=new Map;let Xo=0;function Ko(){const t=window.devicePixelRatio;t!==Xo&&(Xo=t,qo.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function Go(t,e,i){const s=t.canvas,n=s&&gn(s);if(!n)return;const o=ts(((t,e)=>{const s=n.clientWidth;i(t,e),s<n.clientWidth&&i()}),window),a=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,s=e.contentRect.height;0===i&&0===s||o(i,s)}));return a.observe(n),function(t,e){qo.size||window.addEventListener("resize",Ko),qo.set(t,e)}(t,o),a}function Jo(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){qo.delete(t),qo.size||window.removeEventListener("resize",Ko)}(t)}function Zo(t,e,i){const s=t.canvas,n=ts((e=>{null!==t.ctx&&i(function(t,e){const i=Bo[t.type]||t.type,{x:s,y:n}=yn(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==n?n:null}}(e,t))}),t);return function(t,e,i){t&&t.addEventListener(e,i,Vo)}(s,e,n),n}class Qo extends zo{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[Fo]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Wo(n)){const e=Mn(t,"width");void 0!==e&&(t.width=e)}if(Wo(s))if(""===t.style.height)t.height=t.width/(e||2);else{const e=Mn(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Fo])return!1;const i=e[Fo].initial;["height","width"].forEach((t=>{const s=i[t];si(s)?e.removeAttribute(t):e.setAttribute(t,s)}));const s=i.style||{};return Object.keys(s).forEach((t=>{e.style[t]=s[t]})),e.width=e.width,delete e[Fo],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),n={attach:Uo,detach:Yo,resize:Go}[e]||Zo;s[e]=n(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:Jo,detach:Jo,resize:Jo}[e]||Ho)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return vn(t,e,i,s)}isAttached(t){const e=t&&gn(t);return!(!e||!e.isConnected)}}class ta{constructor(){i(this,"x"),i(this,"y"),i(this,"active",!1),i(this,"options"),i(this,"$animations")}tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return zi(this.x)&&zi(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach((t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),s}}function ea(t,e){const i=t.options.ticks,s=function(t){const e=t.options.offset,i=t._tickSize(),s=t._length/i+(e?0:1),n=t._maxLength/i;return Math.floor(Math.min(s,n))}(t),n=Math.min(i.maxTicksLimit||s,s),o=i.major.enabled?function(t){const e=[];let i,s;for(i=0,s=t.length;i<s;i++)t[i].major&&e.push(i);return e}(e):[],a=o.length,r=o[0],l=o[a-1],h=[];if(a>n)return function(t,e,i,s){let n,o=0,a=i[0];for(s=Math.ceil(s),n=0;n<t.length;n++)n===a&&(e.push(t[n]),o++,a=i[o*s])}(e,h,o,a/n),h;const c=function(t,e,i){const s=function(t){const e=t.length;let i,s;if(e<2)return!1;for(s=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==s)return!1;return s}(t),n=e.length/i;if(!s)return Math.max(n,1);const o=function(t){const e=[],i=Math.sqrt(t);let s;for(s=1;s<i;s++)t%s==0&&(e.push(s),e.push(t/s));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}(s);for(let a=0,r=o.length-1;a<r;a++){const t=o[a];if(t>n)return t}return Math.max(n,1)}(o,e,n);if(a>0){let t,i;const s=a>1?Math.round((l-r)/(a-1)):null;for(ia(e,h,c,si(s)?0:r-s,r),t=0,i=a-1;t<i;t++)ia(e,h,c,o[t],o[t+1]);return ia(e,h,c,l,si(s)?e.length:l+s),h}return ia(e,h,c),h}function ia(t,e,i,s,n){const o=li(s,0),a=Math.min(li(n,t.length),t.length);let r,l,h,c=0;for(i=Math.ceil(i),n&&(r=n-s,i=r/Math.floor(r/i)),h=o;h<0;)c++,h=Math.round(o+c*i);for(l=Math.max(o,0);l<a;l++)l===h&&(e.push(t[l]),c++,h=Math.round(o+c*i))}i(ta,"defaults",{}),i(ta,"defaultRoutes");const sa=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,na=(t,e)=>Math.min(e||t,t);function oa(t,e){const i=[],s=t.length/e,n=t.length;let o=0;for(;o<n;o+=s)i.push(t[Math.floor(o)]);return i}function aa(t,e,i){const s=t.ticks.length,n=Math.min(e,s-1),o=t._startPixel,a=t._endPixel,r=1e-6;let l,h=t.getPixelForTick(n);if(!(i&&(l=1===s?Math.max(h-o,a-h):0===e?(t.getPixelForTick(1)-h)/2:(h-t.getPixelForTick(n-1))/2,h+=n<e?l:-l,h<o-r||h>a+r)))return h}function ra(t){return t.drawTicks?t.tickLength:0}function la(t,e){if(!t.display)return 0;const i=Hs(t.font,e),s=Vs(t.padding);return(ni(t.text)?t.text.length:1)*i.lineHeight+s.height}function ha(t,e,i){let s=es(t);return(i&&"right"!==e||!i&&"right"===e)&&(s=(t=>"left"===t?"right":"right"===t?"left":t)(s)),s}class ca extends ta{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=ri(t,Number.POSITIVE_INFINITY),e=ri(e,Number.NEGATIVE_INFINITY),i=ri(i,Number.POSITIVE_INFINITY),s=ri(s,Number.NEGATIVE_INFINITY),{min:ri(t,i),max:ri(e,s),minDefined:ai(t),maxDefined:ai(e)}}getMinMax(t){let e,{min:i,max:s,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:i,max:s};const a=this.getMatchingVisibleMetas();for(let r=0,l=a.length;r<l;++r)e=a[r].controller.getMinMax(this,t),n||(i=Math.min(i,e.min)),o||(s=Math.max(s,e.max));return i=o&&i>s?s:i,s=n&&i>s?i:s,{min:ri(i,ri(s,i)),max:ri(s,ri(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){ci(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:n,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){const{min:s,max:n}=t,o=hi(e,(n-s)/2),a=(t,e)=>i&&0===t?0:t+e;return{min:a(s,-Math.abs(o)),max:a(n,o)}}(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const r=a<this.ticks.length;this._convertTicksToLabels(r?oa(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=ea(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),r&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){ci(this.options.afterUpdate,[this])}beforeSetDimensions(){ci(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){ci(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),ci(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){ci(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,n;for(i=0,s=t.length;i<s;i++)n=t[i],n.label=ci(e.callback,[n.value,i,t],this)}afterTickToLabelConversion(){ci(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){ci(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=na(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,n=e.maxRotation;let o,a,r,l=s;if(!this._isVisible()||!e.display||s>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const h=this._getLabelSizes(),c=h.widest.width,d=h.highest.height,u=Ui(this.chart.width-c,0,this.maxWidth);o=t.offset?this.maxWidth/i:u/(i-1),c+6>o&&(o=u/(i-(t.offset?.5:1)),a=this.maxHeight-ra(t.grid)-e.padding-la(t.title,this.chart.options.font),r=Math.sqrt(c*c+d*d),l=Math.min(Math.asin(Ui((h.highest.height+6)/o,-1,1)),Math.asin(Ui(a/r,-1,1))-Math.asin(Ui(d/r,-1,1)))*(180/Si),l=Math.max(s,Math.min(n,l))),this.labelRotation=l}afterCalculateLabelRotation(){ci(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){ci(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:n}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=la(s,e.options.font);if(a?(t.width=this.maxWidth,t.height=ra(n)+o):(t.height=this.maxHeight,t.width=ra(n)+o),i.display&&this.ticks.length){const{first:e,last:s,widest:n,highest:o}=this._getLabelSizes(),r=2*i.padding,l=Ni(this.labelRotation),h=Math.cos(l),c=Math.sin(l);if(a){const e=i.mirror?0:c*n.width+h*o.height;t.height=Math.min(this.maxHeight,t.height+e+r)}else{const e=i.mirror?0:h*n.width+c*o.height;t.width=Math.min(this.maxWidth,t.width+e+r)}this._calculatePadding(e,s,c,h)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:n,padding:o},position:a}=this.options,r=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let c=0,d=0;r?l?(c=s*t.width,d=i*e.height):(c=i*t.height,d=s*e.width):"start"===n?d=e.width:"end"===n?c=t.width:"inner"!==n&&(c=t.width/2,d=e.width/2),this.paddingLeft=Math.max((c-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((d-h+o)*this.width/(this.width-h),0)}else{let i=e.height/2,s=t.height/2;"start"===n?(i=0,s=t.height):"end"===n&&(i=e.height,s=0),this.paddingTop=i+o,this.paddingBottom=s+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){ci(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)si(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=oa(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:n}=this,o=[],a=[],r=Math.floor(e/na(e,i));let l,h,c,d,u,f,g,p,m,x,b,y=0,_=0;for(l=0;l<e;l+=r){if(d=t[l].label,u=this._resolveTickFontOptions(l),s.font=f=u.string,g=n[f]=n[f]||{data:{},gc:[]},p=u.lineHeight,m=x=0,si(d)||ni(d)){if(ni(d))for(h=0,c=d.length;h<c;++h)b=d[h],si(b)||ni(b)||(m=ws(s,g.data,g.gc,m,b),x+=p)}else m=ws(s,g.data,g.gc,m,d),x=p;o.push(m),a.push(x),y=Math.max(m,y),_=Math.max(x,_)}!function(t,e){di(t,(t=>{const i=t.gc,s=i.length/2;let n;if(s>e){for(n=0;n<s;++n)delete t.data[i[n]];i.splice(0,s)}}))}(n,e);const v=o.indexOf(y),w=a.indexOf(_),k=t=>({width:o[t]||0,height:a[t]||0});return{first:k(0),last:k(e-1),widest:k(v),highest:k(w),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Ui(this._alignToPixels?ks(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return Us(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=Us(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Ni(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),n=this._getLabelSizes(),o=t.autoSkipPadding||0,a=n?n.widest.width+o:0,r=n?n.highest.height+o:0;return this.isHorizontal()?r*i>a*s?a/i:r/s:r*s<a*i?r/i:a/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:n,position:o,border:a}=s,r=n.offset,l=this.isHorizontal(),h=this.ticks.length+(r?1:0),c=ra(n),d=[],u=a.setContext(this.getContext()),f=u.display?u.width:0,g=f/2,p=function(t){return ks(i,t,f)};let m,x,b,y,_,v,w,k,M,S,C,D;if("top"===o)m=p(this.bottom),v=this.bottom-c,k=m-g,S=p(t.top)+g,D=t.bottom;else if("bottom"===o)m=p(this.top),S=t.top,D=p(t.bottom)-g,v=m+g,k=this.top+c;else if("left"===o)m=p(this.right),_=this.right-c,w=m-g,M=p(t.left)+g,C=t.right;else if("right"===o)m=p(this.left),M=t.left,C=p(t.right)-g,_=m+g,w=this.left+c;else if("x"===e){if("center"===o)m=p((t.top+t.bottom)/2+.5);else if(oi(o)){const t=Object.keys(o)[0],e=o[t];m=p(this.chart.scales[t].getPixelForValue(e))}S=t.top,D=t.bottom,v=m+g,k=v+c}else if("y"===e){if("center"===o)m=p((t.left+t.right)/2);else if(oi(o)){const t=Object.keys(o)[0],e=o[t];m=p(this.chart.scales[t].getPixelForValue(e))}_=m-g,w=_-c,M=t.left,C=t.right}const A=li(s.ticks.maxTicksLimit,h),P=Math.max(1,Math.ceil(h/A));for(x=0;x<h;x+=P){const t=this.getContext(x),e=n.setContext(t),s=a.setContext(t),o=e.lineWidth,h=e.color,c=s.dash||[],u=s.dashOffset,f=e.tickWidth,g=e.tickColor,p=e.tickBorderDash||[],m=e.tickBorderDashOffset;b=aa(this,x,r),void 0!==b&&(y=ks(i,b,o),l?_=w=M=C=y:v=k=S=D=y,d.push({tx1:_,ty1:v,tx2:w,ty2:k,x1:M,y1:S,x2:C,y2:D,width:o,color:h,borderDash:c,borderDashOffset:u,tickWidth:f,tickColor:g,tickBorderDash:p,tickBorderDashOffset:m}))}return this._ticksLength=h,this._borderValue=m,d}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:n}=i,o=this.isHorizontal(),a=this.ticks,{align:r,crossAlign:l,padding:h,mirror:c}=n,d=ra(i.grid),u=d+h,f=c?-h:u,g=-Ni(this.labelRotation),p=[];let m,x,b,y,_,v,w,k,M,S,C,D,A="middle";if("top"===s)v=this.bottom-f,w=this._getXAxisLabelAlignment();else if("bottom"===s)v=this.top+f,w=this._getXAxisLabelAlignment();else if("left"===s){const t=this._getYAxisLabelAlignment(d);w=t.textAlign,_=t.x}else if("right"===s){const t=this._getYAxisLabelAlignment(d);w=t.textAlign,_=t.x}else if("x"===e){if("center"===s)v=(t.top+t.bottom)/2+u;else if(oi(s)){const t=Object.keys(s)[0],e=s[t];v=this.chart.scales[t].getPixelForValue(e)+u}w=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)_=(t.left+t.right)/2-u;else if(oi(s)){const t=Object.keys(s)[0],e=s[t];_=this.chart.scales[t].getPixelForValue(e)}w=this._getYAxisLabelAlignment(d).textAlign}"y"===e&&("start"===r?A="top":"end"===r&&(A="bottom"));const P=this._getLabelSizes();for(m=0,x=a.length;m<x;++m){b=a[m],y=b.label;const t=n.setContext(this.getContext(m));k=this.getPixelForTick(m)+n.labelOffset,M=this._resolveTickFontOptions(m),S=M.lineHeight,C=ni(y)?y.length:1;const e=C/2,i=t.color,r=t.textStrokeColor,h=t.textStrokeWidth;let d,u=w;if(o?(_=k,"inner"===w&&(u=m===x-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),D="top"===s?"near"===l||0!==g?-C*S+S/2:"center"===l?-P.highest.height/2-e*S+S:-P.highest.height+S/2:"near"===l||0!==g?S/2:"center"===l?P.highest.height/2-e*S:P.highest.height-C*S,c&&(D*=-1),0===g||t.showLabelBackdrop||(_+=S/2*Math.sin(g))):(v=k,D=(1-C)*S/2),t.showLabelBackdrop){const e=Vs(t.backdropPadding),i=P.heights[m],s=P.widths[m];let n=D-e.top,o=0-e.left;switch(A){case"middle":n-=i/2;break;case"bottom":n-=i}switch(w){case"center":o-=s/2;break;case"right":o-=s;break;case"inner":m===x-1?o-=s:m>0&&(o-=s/2)}d={left:o,top:n,width:s+e.width,height:i+e.height,color:t.backdropColor}}p.push({label:y,font:M,textOffset:D,options:{rotation:g,color:i,strokeColor:r,strokeWidth:h,textAlign:u,textBaseline:A,translation:[_,v],backdrop:d}})}return p}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Ni(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:n}}=this.options,o=t+n,a=this._getLabelSizes().widest.width;let r,l;return"left"===e?s?(l=this.right+n,"near"===i?r="left":"center"===i?(r="center",l+=a/2):(r="right",l+=a)):(l=this.right-o,"near"===i?r="right":"center"===i?(r="center",l-=a/2):(r="left",l=this.left)):"right"===e?s?(l=this.left+n,"near"===i?r="right":"center"===i?(r="center",l-=a/2):(r="left",l-=a)):(l=this.left+o,"near"===i?r="left":"center"===i?(r="center",l+=a/2):(r="right",l=this.right)):r="right",{textAlign:r,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:n,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,n,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));if(i>=0){return e.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,o;const a=(t,e,s)=>{s.width&&s.color&&(i.save(),i.lineWidth=s.width,i.strokeStyle=s.color,i.setLineDash(s.borderDash||[]),i.lineDashOffset=s.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(n=0,o=s.length;n<o;++n){const t=s[n];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,n=i.setContext(this.getContext()),o=i.display?n.width:0;if(!o)return;const a=s.setContext(this.getContext(0)).lineWidth,r=this._borderValue;let l,h,c,d;this.isHorizontal()?(l=ks(t,this.left,o)-o/2,h=ks(t,this.right,a)+a/2,c=d=r):(c=ks(t,this.top,o)-o/2,d=ks(t,this.bottom,a)+a/2,l=h=r),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(l,c),e.lineTo(h,d),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&As(e,i);const s=this.getLabelItems(t);for(const n of s){const t=n.options,i=n.font;Rs(e,n.label,0,n.textOffset,i,t)}i&&Ps(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const n=Hs(i.font),o=Vs(i.padding),a=i.align;let r=n.lineHeight/2;"bottom"===e||"center"===e||oi(e)?(r+=o.bottom,ni(i.text)&&(r+=n.lineHeight*(i.text.length-1))):r+=o.top;const{titleX:l,titleY:h,maxWidth:c,rotation:d}=function(t,e,i,s){const{top:n,left:o,bottom:a,right:r,chart:l}=t,{chartArea:h,scales:c}=l;let d,u,f,g=0;const p=a-n,m=r-o;if(t.isHorizontal()){if(u=is(s,o,r),oi(i)){const t=Object.keys(i)[0],s=i[t];f=c[t].getPixelForValue(s)+p-e}else f="center"===i?(h.bottom+h.top)/2+p-e:sa(t,i,e);d=r-o}else{if(oi(i)){const t=Object.keys(i)[0],s=i[t];u=c[t].getPixelForValue(s)-m+e}else u="center"===i?(h.left+h.right)/2-m+e:sa(t,i,e);f=is(s,a,n),g="left"===i?-Ti:Ti}return{titleX:u,titleY:f,maxWidth:d,rotation:g}}(this,r,e,a);Rs(t,i.text,0,0,n,{color:i.color,maxWidth:c,rotation:d,textAlign:ha(a,e,s),textBaseline:"middle",translation:[l,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=li(t.grid&&t.grid.z,-1),s=li(t.border&&t.border.z,0);return this._isVisible()&&this.draw===ca.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];o[i]!==this.id||t&&o.type!==t||s.push(o)}return s}_resolveTickFontOptions(t){return Hs(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class da{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const s=this.items,n=t.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in s||(s[n]=t,function(t,e,i){const s=mi(Object.create(null),[i?vs.get(i):{},vs.get(e),t.defaults]);vs.set(e,s),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const s=i.split("."),n=s.pop(),o=[t].concat(s).join("."),a=e[i].split("."),r=a.pop(),l=a.join(".");vs.route(o,n,l,r)}))}(e,t.defaultRoutes);t.descriptors&&vs.describe(e,t.descriptors)}(t,o,i),this.override&&vs.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in vs[s]&&(delete vs[s][i],this.override&&delete ms[i])}}class ua{constructor(){this.controllers=new da(to,"datasets",!0),this.elements=new da(ta,"elements"),this.plugins=new da(Object,"plugins"),this.scales=new da(ca,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const s=i||this._getRegistryForType(e);i||s.isForType(e)||s===this.plugins&&e.id?this._exec(t,s,e):di(e,(e=>{const s=i||this._getRegistryForType(e);this._exec(t,s,e)}))}))}_exec(t,e,i){const s=vi(t);ci(i["before"+s],[],i),e[t](i),ci(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+i+".");return s}}var fa=new ua;class ga{constructor(){this._init=[]}notify(t,e,i,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const n=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(n,t,e,i);return"afterDestroy"===e&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const n of t){const t=n.plugin;if(!1===ci(t[i],[e,s,n.options],t)&&s.cancelable)return!1}return!0}invalidate(){si(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=li(i.options&&i.options.plugins,{}),n=function(t){const e={},i=[],s=Object.keys(fa.plugins.items);for(let o=0;o<s.length;o++)i.push(fa.getPlugin(s[o]));const n=t.plugins||[];for(let o=0;o<n.length;o++){const t=n[o];-1===i.indexOf(t)&&(i.push(t),e[t.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==s||e?function(t,{plugins:e,localIds:i},s,n){const o=[],a=t.getContext();for(const r of e){const e=r.id,l=pa(s[e],n);null!==l&&o.push({plugin:r,options:ma(t.config,{plugin:r,local:i[e]},l,a)})}return o}(t,n,s,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function pa(t,e){return e||!1!==t?!0===t?{}:t:null}function ma(t,{plugin:e,local:i},s,n){const o=t.pluginScopeKeys(e),a=t.getOptionScopes(s,o);return i&&e.defaults&&a.push(e.defaults),t.createResolver(a,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function xa(t,e){const i=vs.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function ba(t){if("x"===t||"y"===t||"r"===t)return t}function ya(t,...e){if(ba(t))return t;for(const s of e){const e=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&ba(t[0].toLowerCase());if(e)return e}var i;throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function _a(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function va(t,e){const i=ms[t.type]||{scales:{}},s=e.scales||{},n=xa(t.type,e),o=Object.create(null);return Object.keys(s).forEach((e=>{const a=s[e];if(!oi(a))return;if(a._proxy)return;const r=ya(e,a,function(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(i.length)return _a(t,"x",i[0])||_a(t,"y",i[0])}return{}}(e,t),vs.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(r,n),h=i.scales||{};o[e]=xi(Object.create(null),[{axis:r},a,h[r],h[l]])})),t.data.datasets.forEach((i=>{const n=i.type||t.type,a=i.indexAxis||xa(n,e),r=(ms[n]||{}).scales||{};Object.keys(r).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,a),n=i[e+"AxisID"]||e;o[n]=o[n]||Object.create(null),xi(o[n],[{axis:e},s[n],r[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];xi(e,[vs.scales[e.type],vs.scale])})),o}function wa(t){const e=t.options||(t.options={});e.plugins=li(e.plugins,{}),e.scales=va(t,e)}function ka(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Ma=new Map,Sa=new Set;function Ca(t,e){let i=Ma.get(t);return i||(i=e(),Ma.set(t,i),Sa.add(i)),i}const Da=(t,e,i)=>{const s=_i(e,i);void 0!==s&&t.add(s)};class Aa{constructor(t){this._config=function(t){return(t=t||{}).data=ka(t.data),wa(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=ka(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),wa(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Ca(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return Ca(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return Ca(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return Ca(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return s&&!e||(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:n}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;const r=new Set;e.forEach((e=>{t&&(r.add(t),e.forEach((e=>Da(r,t,e)))),e.forEach((t=>Da(r,s,t))),e.forEach((t=>Da(r,ms[n]||{},t))),e.forEach((t=>Da(r,vs,t))),e.forEach((t=>Da(r,xs,t)))}));const l=Array.from(r);return 0===l.length&&l.push(Object.create(null)),Sa.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ms[e]||{},vs.datasets[e]||{},{type:e},vs,xs]}resolveNamedOptions(t,e,i,s=[""]){const n={$shared:!0},{resolver:o,subPrefixes:a}=Pa(this._resolverCache,t,s);let r=o;if(function(t,e){const{isScriptable:i,isIndexable:s}=Xs(t);for(const n of e){const e=i(n),o=s(n),a=(o||e)&&t[n];if(e&&(ki(a)||Ta(a))||o&&ni(a))return!0}return!1}(o,e)){n.$shared=!1;r=qs(o,i=ki(i)?i():i,this.createResolver(t,i,a))}for(const l of e)n[l]=r[l];return n}createResolver(t,e,i=[""],s){const{resolver:n}=Pa(this._resolverCache,t,i);return oi(e)?qs(n,e,void 0,s):n}}function Pa(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=i.join();let o=s.get(n);if(!o){o={resolver:Ys(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},s.set(n,o)}return o}const Ta=t=>oi(t)&&Object.getOwnPropertyNames(t).some((e=>ki(t[e])));const Ia=["top","bottom","left","right","chartArea"];function Oa(t,e){return"top"===t||"bottom"===t||-1===Ia.indexOf(t)&&"x"===e}function ja(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function Ra(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),ci(i&&i.onComplete,[t],e)}function Ea(t){const e=t.chart,i=e.options.animation;ci(i&&i.onProgress,[t],e)}function La(t){return fn()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const za={},Na=t=>{const e=La(t);return Object.values(za).filter((t=>t.canvas===e)).pop()};function Fa(t,e,i){const s=Object.keys(t);for(const n of s){const s=+n;if(s>=e){const o=t[n];delete t[n],(i>0||s>e)&&(t[s+i]=o)}}}function Ba(t,e,i){return t.options.clip?t[i]:e[i]}let Wa=(i(t=class{static register(...t){fa.add(...t),Va()}static unregister(...t){fa.remove(...t),Va()}constructor(t,e){const i=this.config=new Aa(e),s=La(t),n=Na(s);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!fn()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?No:Qo}(s)),this.platform.updateConfig(i);const a=this.platform.acquireContext(s,o.aspectRatio),r=a&&a.canvas,l=r&&r.height,h=r&&r.width;this.id=ii(),this.ctx=a,this.canvas=r,this.width=h,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new ga,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(t,e,s)):t.apply(this,s),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],za[this.id]=this,a&&r&&(Nn.listen(this,"complete",Ra),Nn.listen(this,"progress",Ea),this._initialize(),this.attached&&this.update())}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:n}=this;return si(t)?e&&n?n:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return fa}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():wn(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ms(this.canvas,this.ctx),this}stop(){return Nn.stop(this),this}resize(t,e){Nn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,n),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),r=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,wn(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),ci(i.onResize,[this,o],this),this.attached&&this._doResize(r)&&this.render())}ensureScalesHaveIDs(){di(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let n=[];e&&(n=n.concat(Object.keys(e).map((t=>{const i=e[t],s=ya(t,i),n="r"===s,o="x"===s;return{options:i,dposition:n?"chartArea":o?"bottom":"left",dtype:n?"radialLinear":o?"category":"linear"}})))),di(n,(e=>{const n=e.options,o=n.id,a=ya(o,n),r=li(n.type,e.dtype);void 0!==n.position&&Oa(n.position,a)===Oa(e.dposition)||(n.position=e.dposition),s[o]=!0;let l=null;if(o in i&&i[o].type===r)l=i[o];else{l=new(fa.getScale(r))({id:o,type:r,ctx:this.ctx,chart:this}),i[l.id]=l}l.init(n,t)})),di(s,((t,e)=>{t||delete i[e]})),di(i,(t=>{Lo.configure(this,t,t.options),Lo.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(ja("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const s=e[i];let n=this.getDatasetMeta(i);const o=s.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=o,n.indexAxis=s.indexAxis||xa(o,this.options),n.order=s.order||0,n.index=i,n.label=""+s.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const e=fa.getController(o),{datasetElementType:s,dataElementType:a}=vs.datasets[o];Object.assign(e,{dataElementType:fa.getElement(a),datasetElementType:s&&fa.getElement(s)}),n.controller=new e(this,i),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){di(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let l=0,h=this.data.datasets.length;l<h;l++){const{controller:t}=this.getDatasetMeta(l),e=!s&&-1===n.indexOf(t);t.buildOrUpdateElements(e),o=Math.max(+t.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||di(n,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(ja("z","_idx"));const{_active:a,_lastEvent:r}=this;r?this._eventHandler(r,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){di(this.scales,(t=>{Lo.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);Mi(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:n}of e){Fa(t,s,"_removeElements"===i?-n:n)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),s=i(0);for(let n=1;n<e;n++)if(!Mi(s,i(n)))return;return Array.from(s).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Lo.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],di(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,ki(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Nn.has(this)?this.attached&&!Nn.running(this)&&Nn.start(this):(this.draw(),Ra({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,n;for(s=0,n=e.length;s<n;++s){const n=e[s];t&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,n=function(t,e){const{xScale:i,yScale:s}=t;return i&&s?{left:Ba(i,e,"left"),right:Ba(i,e,"right"),top:Ba(s,e,"top"),bottom:Ba(s,e,"bottom")}:e}(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(s&&As(e,{left:!1===i.left?0:n.left-i.left,right:!1===i.right?this.width:n.right+i.right,top:!1===i.top?0:n.top-i.top,bottom:!1===i.bottom?this.height:n.bottom+i.bottom}),t.controller.draw(),s&&Ps(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Ds(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const n=ko.modes[e];return"function"==typeof n?n(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter((t=>t&&t._dataset===e)).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=Us(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",n=this.getDatasetMeta(t),o=n.controller._resolveAnimations(void 0,s);wi(e)?(n.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(n,{visible:i}),this.update((e=>e.datasetIndex===t?s:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Nn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ms(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete za[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};di(this.options.events,(t=>i(t,s)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(i,s)=>{t[i]&&(e.removeEventListener(this,i,s),delete t[i])},n=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{s("attach",a),this.attached=!0,this.resize(),i("resize",n),i("detach",o)};o=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),i("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){di(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},di(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let n,o,a,r;for("dataset"===e&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),a=0,r=t.length;a<r;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!ui(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,i){const s=this.options.hover,n=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=n(e,t),a=i?t:n(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),a.length&&s.mode&&this.updateHoverStyle(a,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const n=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(n||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:n}=this,o=e,a=this._getActiveElements(t,s,i,o),r=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,i,s){return i&&"mouseout"!==t.type?s?e:t:null}(t,this._lastEvent,i,r);i&&(this._lastEvent=null,ci(n.onHover,[t,a,this],this),r&&ci(n.onClick,[t,a,this],this));const h=!ui(a,s);return(h||e)&&(this._active=a,this._updateHoverStyles(a,s,e)),this._lastEvent=l,h}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,s)}},"defaults",vs),i(t,"instances",za),i(t,"overrides",ms),i(t,"registry",fa),i(t,"version","4.4.7"),i(t,"getChart",Na),t);function Va(){return di(Wa.instances,(t=>t._plugins.invalidate()))}function Ha(t,e,i,s){const n=Fs(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(i-e)/2,a=Math.min(o,s*e/2),r=t=>{const e=(i-Math.min(o,t))*s/2;return Ui(t,0,Math.min(o,e))};return{outerStart:r(n.outerStart),outerEnd:r(n.outerEnd),innerStart:Ui(n.innerStart,0,a),innerEnd:Ui(n.innerEnd,0,a)}}function $a(t,e,i,s){return{x:i+t*Math.cos(e),y:s+t*Math.sin(e)}}function Ua(t,e,i,s,n,o){const{x:a,y:r,startAngle:l,pixelMargin:h,innerRadius:c}=e,d=Math.max(e.outerRadius+s+i-h,0),u=c>0?c+s+i+h:0;let f=0;const g=n-l;if(s){const t=((c>0?c-s:0)+(d>0?d-s:0))/2;f=(g-(0!==t?g*t/(t+s):g))/2}const p=(g-Math.max(.001,g*d-i/Si)/d)/2,m=l+p+f,x=n-p-f,{outerStart:b,outerEnd:y,innerStart:_,innerEnd:v}=Ha(e,u,d,x-m),w=d-b,k=d-y,M=m+b/w,S=x-y/k,C=u+_,D=u+v,A=m+_/C,P=x-v/D;if(t.beginPath(),o){const e=(M+S)/2;if(t.arc(a,r,d,M,e),t.arc(a,r,d,e,S),y>0){const e=$a(k,S,a,r);t.arc(e.x,e.y,y,S,x+Ti)}const i=$a(D,x,a,r);if(t.lineTo(i.x,i.y),v>0){const e=$a(D,P,a,r);t.arc(e.x,e.y,v,x+Ti,P+Math.PI)}const s=(x-v/u+(m+_/u))/2;if(t.arc(a,r,u,x-v/u,s,!0),t.arc(a,r,u,s,m+_/u,!0),_>0){const e=$a(C,A,a,r);t.arc(e.x,e.y,_,A+Math.PI,m-Ti)}const n=$a(w,m,a,r);if(t.lineTo(n.x,n.y),b>0){const e=$a(w,M,a,r);t.arc(e.x,e.y,b,m-Ti,M)}}else{t.moveTo(a,r);const e=Math.cos(M)*d+a,i=Math.sin(M)*d+r;t.lineTo(e,i);const s=Math.cos(S)*d+a,n=Math.sin(S)*d+r;t.lineTo(s,n)}t.closePath()}function Ya(t,e,i,s,n){const{fullCircles:o,startAngle:a,circumference:r,options:l}=e,{borderWidth:h,borderJoinStyle:c,borderDash:d,borderDashOffset:u}=l,f="inner"===l.borderAlign;if(!h)return;t.setLineDash(d||[]),t.lineDashOffset=u,f?(t.lineWidth=2*h,t.lineJoin=c||"round"):(t.lineWidth=h,t.lineJoin=c||"bevel");let g=e.endAngle;if(o){Ua(t,e,i,s,g,n);for(let e=0;e<o;++e)t.stroke();isNaN(r)||(g=a+(r%Ci||Ci))}f&&function(t,e,i){const{startAngle:s,pixelMargin:n,x:o,y:a,outerRadius:r,innerRadius:l}=e;let h=n/r;t.beginPath(),t.arc(o,a,r,s-h,i+h),l>n?(h=n/l,t.arc(o,a,l,i+h,s-h,!0)):t.arc(o,a,n,i+Ti,s-Ti),t.closePath(),t.clip()}(t,e,g),o||(Ua(t,e,i,s,g,n),t.stroke())}class qa extends ta{constructor(t){super(),i(this,"circumference"),i(this,"endAngle"),i(this,"fullCircles"),i(this,"innerRadius"),i(this,"outerRadius"),i(this,"pixelMargin"),i(this,"startAngle"),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:n,distance:o}=Bi(s,{x:t,y:e}),{startAngle:a,endAngle:r,innerRadius:l,outerRadius:h,circumference:c}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),d=(this.options.spacing+this.options.borderWidth)/2,u=li(c,r-a),f=$i(n,a,r)&&a!==r,g=u>=Ci||f,p=Yi(o,l+d,h+d);return g&&p}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:n,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:r,spacing:l}=this.options,h=(s+n)/2,c=(o+a+l+r)/2;return{x:e+Math.cos(h)*c,y:i+Math.sin(h)*c}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/4,n=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>Ci?Math.floor(i/Ci):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*s,Math.sin(a)*s);const r=s*(1-Math.sin(Math.min(Si,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,s,n){const{fullCircles:o,startAngle:a,circumference:r}=e;let l=e.endAngle;if(o){Ua(t,e,i,s,l,n);for(let e=0;e<o;++e)t.fill();isNaN(r)||(l=a+(r%Ci||Ci))}Ua(t,e,i,s,l,n),t.fill()}(t,this,r,n,o),Ya(t,this,r,n,o),t.restore()}}function Xa(t,e,i=e){t.lineCap=li(i.borderCapStyle,e.borderCapStyle),t.setLineDash(li(i.borderDash,e.borderDash)),t.lineDashOffset=li(i.borderDashOffset,e.borderDashOffset),t.lineJoin=li(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=li(i.borderWidth,e.borderWidth),t.strokeStyle=li(i.borderColor,e.borderColor)}function Ka(t,e,i){t.lineTo(i.x,i.y)}function Ga(t,e,i={}){const s=t.length,{start:n=0,end:o=s-1}=i,{start:a,end:r}=e,l=Math.max(n,a),h=Math.min(o,r),c=n<a&&o<a||n>r&&o>r;return{count:s,start:l,loop:e.loop,ilen:h<l&&!c?s+h-l:h-l}}function Ja(t,e,i,s){const{points:n,options:o}=e,{count:a,start:r,loop:l,ilen:h}=Ga(n,i,s),c=function(t){return t.stepped?Ts:t.tension||"monotone"===t.cubicInterpolationMode?Is:Ka}(o);let d,u,f,{move:g=!0,reverse:p}=s||{};for(d=0;d<=h;++d)u=n[(r+(p?h-d:d))%a],u.skip||(g?(t.moveTo(u.x,u.y),g=!1):c(t,f,u,p,o.stepped),f=u);return l&&(u=n[(r+(p?h:0))%a],c(t,f,u,p,o.stepped)),!!l}function Za(t,e,i,s){const n=e.points,{count:o,start:a,ilen:r}=Ga(n,i,s),{move:l=!0,reverse:h}=s||{};let c,d,u,f,g,p,m=0,x=0;const b=t=>(a+(h?r-t:t))%o,y=()=>{f!==g&&(t.lineTo(m,g),t.lineTo(m,f),t.lineTo(m,p))};for(l&&(d=n[b(0)],t.moveTo(d.x,d.y)),c=0;c<=r;++c){if(d=n[b(c)],d.skip)continue;const e=d.x,i=d.y,s=0|e;s===u?(i<f?f=i:i>g&&(g=i),m=(x*m+e)/++x):(y(),t.lineTo(e,i),u=s,x=0,f=g=i),p=i}y()}function Qa(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?Za:Ja}i(qa,"id","arc"),i(qa,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),i(qa,"defaultRoutes",{backgroundColor:"backgroundColor"}),i(qa,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t});const tr="function"==typeof Path2D;function er(t,e,i,s){tr&&!e.options.segment?function(t,e,i,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,i,s)&&n.closePath()),Xa(t,e.options),t.stroke(n)}(t,e,i,s):function(t,e,i,s){const{segments:n,options:o}=e,a=Qa(e);for(const r of n)Xa(t,o,r.style),t.beginPath(),a(t,e,r,{start:i,end:i+s-1})&&t.closePath(),t.stroke()}(t,e,i,s)}class ir extends ta{constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;un(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const i=t.points,s=t.options.spanGaps,n=i.length;if(!n)return[];const o=!!t._loop,{start:a,end:r}=function(t,e,i,s){let n=0,o=e-1;if(i&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,i&&(o+=n);o>n&&t[o%e].skip;)o--;return o%=e,{start:n,end:o}}(i,n,o,s);return Rn(t,!0===s?[{start:a,end:r,loop:o}]:function(t,e,i,s){const n=t.length,o=[];let a,r=e,l=t[e];for(a=e+1;a<=i;++a){const i=t[a%n];i.skip||i.stop?l.skip||(s=!1,o.push({start:e%n,end:(a-1)%n,loop:s}),e=r=i.stop?a:null):(r=a,l.skip&&(e=a)),l=i}return null!==r&&o.push({start:e%n,end:r%n,loop:s}),o}(i,a,r<a?r+n:r,!!t._fullLoop&&0===a&&r===n-1),i,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],n=this.points,o=function(t,e){const i=[],s=t.segments;for(let n=0;n<s.length;n++){const o=jn(s[n],t.points,e);o.length&&i.push(...o)}return i}(this,{property:e,start:s,end:s});if(!o.length)return;const a=[],r=function(t){return t.stepped?Cn:t.tension||"monotone"===t.cubicInterpolationMode?Dn:Sn}(i);let l,h;for(l=0,h=o.length;l<h;++l){const{start:h,end:c}=o[l],d=n[h],u=n[c];if(d===u){a.push(d);continue}const f=r(d,u,Math.abs((s-d[e])/(u[e]-d[e])),i.stepped);f[e]=t[e],a.push(f)}return 1===a.length?a[0]:a}pathSegment(t,e,i){return Qa(this)(t,this,e,i)}path(t,e,i){const s=this.segments,n=Qa(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const a of s)o&=n(t,this,a,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(t.save(),er(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function sr(t,e,i,s){const n=t.options,{[i]:o}=t.getProps([i],s);return Math.abs(e-o)<n.radius+n.hitRadius}i(ir,"id","line"),i(ir,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),i(ir,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),i(ir,"descriptors",{_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t});class nr extends ta{constructor(t){super(),i(this,"parsed"),i(this,"skip"),i(this,"stop"),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:n,y:o}=this.getProps(["x","y"],i);return Math.pow(t-n,2)+Math.pow(e-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return sr(this,t,"x",e)}inYRange(t,e){return sr(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!Ds(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,Ss(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function or(t,e){const{x:i,y:s,base:n,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let r,l,h,c,d;return t.horizontal?(d=a/2,r=Math.min(i,n),l=Math.max(i,n),h=s-d,c=s+d):(d=o/2,r=i-d,l=i+d,h=Math.min(s,n),c=Math.max(s,n)),{left:r,top:h,right:l,bottom:c}}function ar(t,e,i,s){return t?0:Ui(e,i,s)}function rr(t){const e=or(t),i=e.right-e.left,s=e.bottom-e.top,n=function(t,e,i){const s=t.options.borderWidth,n=t.borderSkipped,o=Bs(s);return{t:ar(n.top,o.top,0,i),r:ar(n.right,o.right,0,e),b:ar(n.bottom,o.bottom,0,i),l:ar(n.left,o.left,0,e)}}(t,i/2,s/2),o=function(t,e,i){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,o=Ws(n),a=Math.min(e,i),r=t.borderSkipped,l=s||oi(n);return{topLeft:ar(!l||r.top||r.left,o.topLeft,0,a),topRight:ar(!l||r.top||r.right,o.topRight,0,a),bottomLeft:ar(!l||r.bottom||r.left,o.bottomLeft,0,a),bottomRight:ar(!l||r.bottom||r.right,o.bottomRight,0,a)}}(t,i/2,s/2);return{outer:{x:e.left,y:e.top,w:i,h:s,radius:o},inner:{x:e.left+n.l,y:e.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function lr(t,e,i,s){const n=null===e,o=null===i,a=t&&!(n&&o)&&or(t,s);return a&&(n||Yi(e,a.left,a.right))&&(o||Yi(i,a.top,a.bottom))}function hr(t,e){t.rect(e.x,e.y,e.w,e.h)}function cr(t,e,i={}){const s=t.x!==i.x?-e:0,n=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-s,a=(t.y+t.h!==i.y+i.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+o,h:t.h+a,radius:t.radius}}i(nr,"id","point"),i(nr,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),i(nr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class dr extends ta{constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:n,outer:o}=rr(this),a=(r=o.radius).topLeft||r.topRight||r.bottomLeft||r.bottomRight?Es:hr;var r;t.save(),o.w===n.w&&o.h===n.h||(t.beginPath(),a(t,cr(o,e,n)),t.clip(),a(t,cr(n,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,cr(n,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return lr(this,t,e,i)}inXRange(t,e){return lr(this,t,null,e)}inYRange(t,e){return lr(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(e+s)/2:e,y:n?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}}i(dr,"id","bar"),i(dr,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),i(dr,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const ur=(t,e)=>{let{boxHeight:i=e,boxWidth:s=e}=t;return t.usePointStyle&&(i=Math.min(i,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}};class fr extends ta{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=ci(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,s=Hs(i.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:r}=ur(i,n);let l,h;e.font=s.string,this.isHorizontal()?(l=this.maxWidth,h=this._fitRows(o,n,a,r)+10):(h=this.maxHeight,l=this._fitCols(o,s,a,r)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:n,maxWidth:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.lineWidths=[0],h=s+a;let c=t;n.textAlign="left",n.textBaseline="middle";let d=-1,u=-h;return this.legendItems.forEach(((t,f)=>{const g=i+e/2+n.measureText(t.text).width;(0===f||l[l.length-1]+g+2*a>o)&&(c+=h,l[l.length-(f>0?0:1)]=0,u+=h,d++),r[f]={left:0,top:u,row:d,width:g,height:s},l[l.length-1]+=g+a})),c}_fitCols(t,e,i,s){const{ctx:n,maxHeight:o,options:{labels:{padding:a}}}=this,r=this.legendHitBoxes=[],l=this.columnSizes=[],h=o-t;let c=a,d=0,u=0,f=0,g=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:p,itemHeight:m}=function(t,e,i,s,n){const o=function(t,e,i,s){let n=t.text;n&&"string"!=typeof n&&(n=n.reduce(((t,e)=>t.length>e.length?t:e)));return e+i.size/2+s.measureText(n).width}(s,t,e,i),a=function(t,e,i){let s=t;"string"!=typeof e.text&&(s=gr(e,i));return s}(n,s,e.lineHeight);return{itemWidth:o,itemHeight:a}}(i,e,n,t,s);o>0&&u+m+2*a>h&&(c+=d+a,l.push({width:d,height:u}),f+=d+a,g++,d=u=0),r[o]={left:f,top:u,col:g,width:p,height:m},d=Math.max(d,p),u+=m+a})),c+=d,l.push({width:d,height:u}),c}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:n}}=this,o=An(n,this.left,this.width);if(this.isHorizontal()){let n=0,a=is(i,this.left+s,this.right-this.lineWidths[n]);for(const r of e)n!==r.row&&(n=r.row,a=is(i,this.left+s,this.right-this.lineWidths[n])),r.top+=this.top+t+s,r.left=o.leftForLtr(o.x(a),r.width),a+=r.width+s}else{let n=0,a=is(i,this.top+t+s,this.bottom-this.columnSizes[n].height);for(const r of e)r.col!==n&&(n=r.col,a=is(i,this.top+t+s,this.bottom-this.columnSizes[n].height)),r.top=a,r.left+=this.left+s,r.left=o.leftForLtr(o.x(r.left),r.width),a+=r.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;As(t,this),this._draw(),Ps(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:n,labels:o}=t,a=vs.color,r=An(t.rtl,this.left,this.width),l=Hs(o.font),{padding:h}=o,c=l.size,d=c/2;let u;this.drawTitle(),s.textAlign=r.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=l.string;const{boxWidth:f,boxHeight:g,itemHeight:p}=ur(o,c),m=this.isHorizontal(),x=this._computeTitleHeight();u=m?{x:is(n,this.left+h,this.right-i[0]),y:this.top+h+x,line:0}:{x:this.left+h,y:is(n,this.top+x+h,this.bottom-e[0].height),line:0},Pn(this.ctx,t.textDirection);const b=p+h;this.legendItems.forEach(((y,_)=>{s.strokeStyle=y.fontColor,s.fillStyle=y.fontColor;const v=s.measureText(y.text).width,w=r.textAlign(y.textAlign||(y.textAlign=o.textAlign)),k=f+d+v;let M=u.x,S=u.y;r.setWidth(this.width),m?_>0&&M+k+h>this.right&&(S=u.y+=b,u.line++,M=u.x=is(n,this.left+h,this.right-i[u.line])):_>0&&S+b>this.bottom&&(M=u.x=M+e[u.line].width+h,u.line++,S=u.y=is(n,this.top+x+h,this.bottom-e[u.line].height));if(function(t,e,i){if(isNaN(f)||f<=0||isNaN(g)||g<0)return;s.save();const n=li(i.lineWidth,1);if(s.fillStyle=li(i.fillStyle,a),s.lineCap=li(i.lineCap,"butt"),s.lineDashOffset=li(i.lineDashOffset,0),s.lineJoin=li(i.lineJoin,"miter"),s.lineWidth=n,s.strokeStyle=li(i.strokeStyle,a),s.setLineDash(li(i.lineDash,[])),o.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},l=r.xPlus(t,f/2);Cs(s,a,l,e+d,o.pointStyleWidth&&f)}else{const o=e+Math.max((c-g)/2,0),a=r.leftForLtr(t,f),l=Ws(i.borderRadius);s.beginPath(),Object.values(l).some((t=>0!==t))?Es(s,{x:a,y:o,w:f,h:g,radius:l}):s.rect(a,o,f,g),s.fill(),0!==n&&s.stroke()}s.restore()}(r.x(M),S,y),M=((t,e,i,s)=>t===(s?"left":"right")?i:"center"===t?(e+i)/2:e)(w,M+f+d,m?M+k:this.right,t.rtl),function(t,e,i){Rs(s,i.text,t,e+p/2,l,{strikethrough:i.hidden,textAlign:r.textAlign(i.textAlign)})}(r.x(M),S,y),m)u.x+=k+h;else if("string"!=typeof y.text){const t=l.lineHeight;u.y+=gr(y,t)+h}else u.y+=b})),Tn(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=Hs(e.font),s=Vs(e.padding);if(!e.display)return;const n=An(t.rtl,this.left,this.width),o=this.ctx,a=e.position,r=i.size/2,l=s.top+r;let h,c=this.left,d=this.width;if(this.isHorizontal())d=Math.max(...this.lineWidths),h=this.top+l,c=is(t.align,c,this.right-d);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);h=l+is(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const u=is(a,c,c+d);o.textAlign=n.textAlign(es(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Rs(o,e.text,u,h,i)}_computeTitleHeight(){const t=this.options.title,e=Hs(t.font),i=Vs(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,n;if(Yi(t,this.left,this.right)&&Yi(e,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(s=n[i],Yi(t,s.left,s.left+s.width)&&Yi(e,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,a=(n=i,null!==(s=o)&&null!==n&&s.datasetIndex===n.datasetIndex&&s.index===n.index);o&&!a&&ci(e.onLeave,[t,o,this],this),this._hoveredItem=i,i&&!a&&ci(e.onHover,[t,i,this],this)}else i&&ci(e.onClick,[t,i,this],this);var s,n}}function gr(t,e){return e*(t.text?t.text.length:0)}var pr={id:"legend",_element:fr,start(t,e,i){const s=t.legend=new fr({ctx:t.ctx,options:i,chart:t});Lo.configure(t,s,i),Lo.addBox(t,s)},stop(t){Lo.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const s=t.legend;Lo.configure(t,s,i),s.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const s=e.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:o,useBorderRadius:a,borderRadius:r}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(i?0:void 0),h=Vs(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:l.borderColor,pointStyle:s||l.pointStyle,rotation:l.rotation,textAlign:n||l.textAlign,borderRadius:a&&(r||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class mr extends ta{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const s=ni(i.text)?i.text.length:1;this._padding=Vs(i.padding);const n=s*Hs(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:s,right:n,options:o}=this,a=o.align;let r,l,h,c=0;return this.isHorizontal()?(l=is(a,i,n),h=e+t,r=n-i):("left"===o.position?(l=i+t,h=is(a,s,e),c=-.5*Si):(l=n-t,h=is(a,e,s),c=.5*Si),r=s-e),{titleX:l,titleY:h,maxWidth:r,rotation:c}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=Hs(e.font),s=i.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:a,rotation:r}=this._drawArgs(s);Rs(t,e.text,0,0,i,{color:e.color,maxWidth:a,rotation:r,textAlign:es(e.align),textBaseline:"middle",translation:[n,o]})}}var xr={id:"title",_element:mr,start(t,e,i){!function(t,e){const i=new mr({ctx:t.ctx,options:e,chart:t});Lo.configure(t,i,e),Lo.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;Lo.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const s=t.titleBlock;Lo.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const br={average(t){if(!t.length)return!1;let e,i,s=new Set,n=0,o=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();s.add(t.x),n+=t.y,++o}}if(0===o||0===s.size)return!1;return{x:[...s].reduce(((t,e)=>t+e))/s.size,y:n/o}},nearest(t,e){if(!t.length)return!1;let i,s,n,o=e.x,a=e.y,r=Number.POSITIVE_INFINITY;for(i=0,s=t.length;i<s;++i){const s=t[i].element;if(s&&s.hasValue()){const t=Wi(e,s.getCenterPoint());t<r&&(r=t,n=s)}}if(n){const t=n.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function yr(t,e){return e&&(ni(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function _r(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function vr(t,e){const{element:i,datasetIndex:s,index:n}=e,o=t.getDatasetMeta(s).controller,{label:a,value:r}=o.getLabelAndValue(n);return{chart:t,label:a,parsed:o.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:r,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function wr(t,e){const i=t.chart.ctx,{body:s,footer:n,title:o}=t,{boxWidth:a,boxHeight:r}=e,l=Hs(e.bodyFont),h=Hs(e.titleFont),c=Hs(e.footerFont),d=o.length,u=n.length,f=s.length,g=Vs(e.padding);let p=g.height,m=0,x=s.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(x+=t.beforeBody.length+t.afterBody.length,d&&(p+=d*h.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),x){p+=f*(e.displayColors?Math.max(r,l.lineHeight):l.lineHeight)+(x-f)*l.lineHeight+(x-1)*e.bodySpacing}u&&(p+=e.footerMarginTop+u*c.lineHeight+(u-1)*e.footerSpacing);let b=0;const y=function(t){m=Math.max(m,i.measureText(t).width+b)};return i.save(),i.font=h.string,di(t.title,y),i.font=l.string,di(t.beforeBody.concat(t.afterBody),y),b=e.displayColors?a+2+e.boxPadding:0,di(s,(t=>{di(t.before,y),di(t.lines,y),di(t.after,y)})),b=0,i.font=c.string,di(t.footer,y),i.restore(),m+=g.width,{width:m,height:p}}function kr(t,e,i,s){const{x:n,width:o}=i,{width:a,chartArea:{left:r,right:l}}=t;let h="center";return"center"===s?h=n<=(r+l)/2?"left":"right":n<=o/2?h="left":n>=a-o/2&&(h="right"),function(t,e,i,s){const{x:n,width:o}=s,a=i.caretSize+i.caretPadding;return"left"===t&&n+o+a>e.width||"right"===t&&n-o-a<0||void 0}(h,t,e,i)&&(h="center"),h}function Mr(t,e,i){const s=i.yAlign||e.yAlign||function(t,e){const{y:i,height:s}=e;return i<s/2?"top":i>t.height-s/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||kr(t,e,i,s),yAlign:s}}function Sr(t,e,i,s){const{caretSize:n,caretPadding:o,cornerRadius:a}=t,{xAlign:r,yAlign:l}=i,h=n+o,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=Ws(a);let g=function(t,e){let{x:i,width:s}=t;return"right"===e?i-=s:"center"===e&&(i-=s/2),i}(e,r);const p=function(t,e,i){let{y:s,height:n}=t;return"top"===e?s+=i:s-="bottom"===e?n+i:n/2,s}(e,l,h);return"center"===l?"left"===r?g+=h:"right"===r&&(g-=h):"left"===r?g-=Math.max(c,u)+n:"right"===r&&(g+=Math.max(d,f)+n),{x:Ui(g,0,s.width-e.width),y:Ui(p,0,s.height-e.height)}}function Cr(t,e,i){const s=Vs(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-s.right:t.x+s.left}function Dr(t){return yr([],_r(t))}function Ar(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const Pr={beforeTitle:ei,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:ei,beforeBody:ei,beforeLabel:ei,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return si(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ei,afterBody:ei,beforeFooter:ei,footer:ei,afterFooter:ei};function Tr(t,e,i,s){const n=t[e].call(i,s);return void 0===n?Pr[e].call(i,s):n}class Ir extends ta{constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,n=new Vn(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,i=this._tooltipItems,Us(t,{tooltip:e,tooltipItems:i,type:"tooltip"})));var t,e,i}getTitle(t,e){const{callbacks:i}=e,s=Tr(i,"beforeTitle",this,t),n=Tr(i,"title",this,t),o=Tr(i,"afterTitle",this,t);let a=[];return a=yr(a,_r(s)),a=yr(a,_r(n)),a=yr(a,_r(o)),a}getBeforeBody(t,e){return Dr(Tr(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return di(t,(t=>{const e={before:[],lines:[],after:[]},n=Ar(i,t);yr(e.before,_r(Tr(n,"beforeLabel",this,t))),yr(e.lines,Tr(n,"label",this,t)),yr(e.after,_r(Tr(n,"afterLabel",this,t))),s.push(e)})),s}getAfterBody(t,e){return Dr(Tr(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=Tr(i,"beforeFooter",this,t),n=Tr(i,"footer",this,t),o=Tr(i,"afterFooter",this,t);let a=[];return a=yr(a,_r(s)),a=yr(a,_r(n)),a=yr(a,_r(o)),a}_createItems(t){const e=this._active,i=this.chart.data,s=[],n=[],o=[];let a,r,l=[];for(a=0,r=e.length;a<r;++a)l.push(vr(this.chart,e[a]));return t.filter&&(l=l.filter(((e,s,n)=>t.filter(e,s,n,i)))),t.itemSort&&(l=l.sort(((e,s)=>t.itemSort(e,s,i)))),di(l,(e=>{const i=Ar(t.callbacks,e);s.push(Tr(i,"labelColor",this,e)),n.push(Tr(i,"labelPointStyle",this,e)),o.push(Tr(i,"labelTextColor",this,e))})),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let n,o=[];if(s.length){const t=br[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const e=this._size=wr(this,i),a=Object.assign({},t,e),r=Mr(this.chart,i,a),l=Sr(i,a,r,this.chart);this.xAlign=r.xAlign,this.yAlign=r.yAlign,n={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const n=this.getCaretPosition(t,i,s);e.lineTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineTo(n.x3,n.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:n}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:r,topRight:l,bottomLeft:h,bottomRight:c}=Ws(a),{x:d,y:u}=t,{width:f,height:g}=e;let p,m,x,b,y,_;return"center"===n?(y=u+g/2,"left"===s?(p=d,m=p-o,b=y+o,_=y-o):(p=d+f,m=p+o,b=y-o,_=y+o),x=p):(m="left"===s?d+Math.max(r,h)+o:"right"===s?d+f-Math.max(l,c)-o:this.caretX,"top"===n?(b=u,y=b-o,p=m-o,x=m+o):(b=u+g,y=b+o,p=m+o,x=m-o),_=b),{x1:p,x2:m,x3:x,y1:b,y2:y,y3:_}}drawTitle(t,e,i){const s=this.title,n=s.length;let o,a,r;if(n){const l=An(i.rtl,this.x,this.width);for(t.x=Cr(this,i.titleAlign,i),e.textAlign=l.textAlign(i.titleAlign),e.textBaseline="middle",o=Hs(i.titleFont),a=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,r=0;r<n;++r)e.fillText(s[r],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,r+1===n&&(t.y+=i.titleMarginBottom-a)}}_drawColorBox(t,e,i,s,n){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:r,boxWidth:l}=n,h=Hs(n.bodyFont),c=Cr(this,"left",n),d=s.x(c),u=r<h.lineHeight?(h.lineHeight-r)/2:0,f=e.y+u;if(n.usePointStyle){const e={radius:Math.min(l,r)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},i=s.leftForLtr(d,l)+l/2,h=f+r/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,Ss(t,e,i,h),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,Ss(t,e,i,h)}else{t.lineWidth=oi(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=s.leftForLtr(d,l),i=s.leftForLtr(s.xPlus(d,1),l-2),a=Ws(o.borderRadius);Object.values(a).some((t=>0!==t))?(t.beginPath(),t.fillStyle=n.multiKeyBackground,Es(t,{x:e,y:f,w:l,h:r,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Es(t,{x:i,y:f+1,w:l-2,h:r-2,radius:a}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(e,f,l,r),t.strokeRect(e,f,l,r),t.fillStyle=o.backgroundColor,t.fillRect(i,f+1,l-2,r-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:n,bodyAlign:o,displayColors:a,boxHeight:r,boxWidth:l,boxPadding:h}=i,c=Hs(i.bodyFont);let d=c.lineHeight,u=0;const f=An(i.rtl,this.x,this.width),g=function(i){e.fillText(i,f.x(t.x+u),t.y+d/2),t.y+=d+n},p=f.textAlign(o);let m,x,b,y,_,v,w;for(e.textAlign=o,e.textBaseline="middle",e.font=c.string,t.x=Cr(this,p,i),e.fillStyle=i.bodyColor,di(this.beforeBody,g),u=a&&"right"!==p?"center"===o?l/2+h:l+2+h:0,y=0,v=s.length;y<v;++y){for(m=s[y],x=this.labelTextColors[y],e.fillStyle=x,di(m.before,g),b=m.lines,a&&b.length&&(this._drawColorBox(e,t,y,f,i),d=Math.max(c.lineHeight,r)),_=0,w=b.length;_<w;++_)g(b[_]),d=c.lineHeight;di(m.after,g)}u=0,d=c.lineHeight,di(this.afterBody,g),t.y-=n}drawFooter(t,e,i){const s=this.footer,n=s.length;let o,a;if(n){const r=An(i.rtl,this.x,this.width);for(t.x=Cr(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=r.textAlign(i.footerAlign),e.textBaseline="middle",o=Hs(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,a=0;a<n;++a)e.fillText(s[a],r.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:n,yAlign:o}=this,{x:a,y:r}=t,{width:l,height:h}=i,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:f}=Ws(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(a+c,r),"top"===o&&this.drawCaret(t,e,i,s),e.lineTo(a+l-d,r),e.quadraticCurveTo(a+l,r,a+l,r+d),"center"===o&&"right"===n&&this.drawCaret(t,e,i,s),e.lineTo(a+l,r+h-f),e.quadraticCurveTo(a+l,r+h,a+l-f,r+h),"bottom"===o&&this.drawCaret(t,e,i,s),e.lineTo(a+u,r+h),e.quadraticCurveTo(a,r+h,a,r+h-u),"center"===o&&"left"===n&&this.drawCaret(t,e,i,s),e.lineTo(a,r+c),e.quadraticCurveTo(a,r,a+c,r),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,n=i&&i.y;if(s||n){const i=br[t.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=wr(this,t),a=Object.assign({},i,this._size),r=Mr(e,t,a),l=Sr(t,a,r,e);s._to===l.x&&n._to===l.y||(this.xAlign=r.xAlign,this.yAlign=r.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Vs(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=i,this.drawBackground(n,t,s,e),Pn(t,e.textDirection),n.y+=o.top,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),Tn(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),n=!ui(i,s),o=this._positionChanged(s,e);(n||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],o=this._getActiveElements(t,n,e,i),a=this._positionChanged(o,t),r=e||!ui(o,n)||a;return r&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),r}_getActiveElements(t,e,i,s){const n=this.options;if("mouseout"===t.type)return[];if(!s)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const o=this.chart.getElementsAtEventForMode(t,n.mode,n,i);return n.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:n}=this,o=br[n.position].call(this,t,e);return!1!==o&&(i!==o.x||s!==o.y)}}i(Ir,"positioners",br);var Or={id:"tooltip",_element:Ir,positioners:br,afterInit(t,e,i){i&&(t.tooltip=new Ir({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Pr},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function jr(t,e,i,s){const n=t.indexOf(e);if(-1===n)return((t,e,i,s)=>("string"==typeof e?(i=t.push(e)-1,s.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,s);return n!==t.lastIndexOf(e)?i:n}function Rr(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Er extends ca{constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:s}of e)t[i]===s&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(si(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:Ui(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:jr(i,t,li(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let n=this.getLabels();n=0===t&&e===n.length-1?n:n.slice(t,e+1),this._valueRange=Math.max(n.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=t;o<=e;o++)s.push({value:o});return s}getLabelForValue(t){return Rr.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function Lr(t,e){const i=[],{bounds:s,step:n,min:o,max:a,precision:r,count:l,maxTicks:h,maxDigits:c,includeBounds:d}=t,u=n||1,f=h-1,{min:g,max:p}=e,m=!si(o),x=!si(a),b=!si(l),y=(p-g)/(c+1);let _,v,w,k,M=Li((p-g)/f/u)*u;if(M<1e-14&&!m&&!x)return[{value:g},{value:p}];k=Math.ceil(p/M)-Math.floor(g/M),k>f&&(M=Li(k*M/f/u)*u),si(r)||(_=Math.pow(10,r),M=Math.ceil(M*_)/_),"ticks"===s?(v=Math.floor(g/M)*M,w=Math.ceil(p/M)*M):(v=g,w=p),m&&x&&n&&function(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}((a-o)/n,M/1e3)?(k=Math.round(Math.min((a-o)/M,h)),M=(a-o)/k,v=o,w=a):b?(v=m?o:v,w=x?a:w,k=l-1,M=(w-v)/k):(k=(w-v)/M,k=Ei(k,Math.round(k),M/1e3)?Math.round(k):Math.ceil(k));const S=Math.max(Fi(M),Fi(v));_=Math.pow(10,si(r)?S:r),v=Math.round(v*_)/_,w=Math.round(w*_)/_;let C=0;for(m&&(d&&v!==o?(i.push({value:o}),v<o&&C++,Ei(Math.round((v+C*M)*_)/_,o,zr(o,y,t))&&C++):v<o&&C++);C<k;++C){const t=Math.round((v+C*M)*_)/_;if(x&&t>a)break;i.push({value:t})}return x&&d&&w!==a?i.length&&Ei(i[i.length-1].value,a,zr(a,y,t))?i[i.length-1].value=a:i.push({value:a}):x&&w!==a||i.push({value:w}),i}function zr(t,e,{horizontal:i,minRotation:s}){const n=Ni(s),o=(i?Math.sin(n):Math.cos(n))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}i(Er,"id","category"),i(Er,"defaults",{ticks:{callback:Rr}});class Nr extends ca{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return si(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this;const o=t=>s=e?s:t,a=t=>n=i?n:t;if(t){const t=Ri(s),e=Ri(n);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(s===n){let e=0===n?1:Math.abs(.05*n);a(n+e),t||o(s-e)}this.min=s,this.max=n}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:s}=t;return s?(e=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,e>1e3&&(e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s=Lr({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&function(t,e,i){let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return fs(t,this.chart.options.locale,this.options.ticks.format)}}class Fr extends Nr{determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=ai(t)?t:0,this.max=ai(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Ni(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}i(Fr,"id","linear"),i(Fr,"defaults",{ticks:{callback:ps.formatters.numeric}});const Br={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Wr=Object.keys(Br);function Vr(t,e){return t-e}function Hr(t,e){if(si(e))return null;const i=t._adapter,{parser:s,round:n,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof s&&(a=s(a)),ai(a)||(a="string"==typeof s?i.parse(a,s):i.parse(a)),null===a?null:(n&&(a="week"!==n||!zi(o)&&!0!==o?i.startOf(a,n):i.startOf(a,"isoWeek",o)),+a)}function $r(t,e,i,s){const n=Wr.length;for(let o=Wr.indexOf(t);o<n-1;++o){const t=Br[Wr[o]],n=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(n*t.size))<=s)return Wr[o]}return Wr[n-1]}function Ur(t,e,i){if(i){if(i.length){const{lo:s,hi:n}=qi(i,e);t[i[s]>=e?i[s]:i[n]]=!0}}else t[e]=!0}function Yr(t,e,i){const s=[],n={},o=e.length;let a,r;for(a=0;a<o;++a)r=e[a],n[r]=a,s.push({value:r,major:!1});return 0!==o&&i?function(t,e,i,s){const n=t._adapter,o=+n.startOf(e[0].value,s),a=e[e.length-1].value;let r,l;for(r=o;r<=a;r=+n.add(r,1,s))l=i[r],l>=0&&(e[l].major=!0);return e}(t,s,n,i):s}class qr extends ca{constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new mo(t.adapters.date);s.init(e),xi(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Hr(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:n,minDefined:o,maxDefined:a}=this.getUserBounds();function r(t){o||isNaN(t.min)||(s=Math.min(s,t.min)),a||isNaN(t.max)||(n=Math.max(n,t.max))}o&&a||(r(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||r(this.getMinMax(!1))),s=ai(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),n=ai(n)&&!isNaN(n)?n:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,o=function(t,e,i){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>i;)n--;return s>0||n<t.length?t.slice(s,n):t}(s,n,this.max);return this._unit=e.unit||(i.autoSkip?$r(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(t,e,i,s,n){for(let o=Wr.length-1;o>=Wr.indexOf(i);o--){const i=Wr[o];if(Br[i].common&&t._adapter.diff(n,s,i)>=e-1)return i}return Wr[i?Wr.indexOf(i):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=Wr.indexOf(t)+1,i=Wr.length;e<i;++e)if(Br[Wr[e]].common)return Wr[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&o.reverse(),Yr(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,i,s=0,n=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),s=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),n=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;s=Ui(s,0,o),n=Ui(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,n=s.time,o=n.unit||$r(n.minUnit,e,i,this._getLabelCapacity(e)),a=li(s.ticks.stepSize,1),r="week"===o&&n.isoWeekday,l=zi(r)||!0===r,h={};let c,d,u=e;if(l&&(u=+t.startOf(u,"isoWeek",r)),u=+t.startOf(u,l?"day":o),t.diff(i,e,o)>1e5*a)throw new Error(e+" and "+i+" are too far apart with stepSize of "+a+" "+o);const f="data"===s.ticks.source&&this.getDataTimestamps();for(c=u,d=0;c<i;c=+t.add(c,a,o),d++)Ur(h,c,f);return c!==i&&"ticks"!==s.bounds&&1!==d||Ur(h,c,f),Object.keys(h).sort(Vr).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,n=e||i[s];return this._adapter.format(t,n)}_tickFormatFunction(t,e,i,s){const n=this.options,o=n.ticks.callback;if(o)return ci(o,[t,e,i],this);const a=n.time.displayFormats,r=this._unit,l=this._majorUnit,h=r&&a[r],c=l&&a[l],d=i[e],u=l&&c&&d&&d.major;return this._adapter.format(t,s||(u?c:h))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Ni(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(s),o=Math.sin(s),a=this._resolveTickFontOptions(0).size;return{w:i*n+a*o,h:i*o+a*n}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,n=this._tickFormatFunction(t,0,Yr(this,[t],this._majorUnit),s),o=this._getLabelSize(n),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,e=s.length;t<e;++t)i=i.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Hr(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Zi(t.sort(Vr))}}function Xr(t,e,i){let s,n,o,a,r=0,l=t.length-1;i?(e>=t[r].pos&&e<=t[l].pos&&({lo:r,hi:l}=Xi(t,"pos",e)),({pos:s,time:o}=t[r]),({pos:n,time:a}=t[l])):(e>=t[r].time&&e<=t[l].time&&({lo:r,hi:l}=Xi(t,"time",e)),({time:s,pos:o}=t[r]),({time:n,pos:a}=t[l]));const h=n-s;return h?o+(a-o)*(e-s)/h:o}i(qr,"id","time"),i(qr,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Kr extends qr{constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Xr(e,this.min),this._tableRange=Xr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],n=[];let o,a,r,l,h;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=i&&s.push(l);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=s.length;o<a;++o)h=s[o+1],r=s[o-1],l=s[o],Math.round((h+r)/2)!==l&&n.push({time:l,pos:o/(a-1)});return n}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(Xr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return Xr(this._table,i*this._tableRange+this._minPos,!0)}}i(Kr,"id","timeseries"),i(Kr,"defaults",qr.defaults);const Gr="label";function Jr(t,e){"function"==typeof t?t(e):t&&(t.current=e)}function Zr(t,e){t.labels=e}function Qr(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Gr;const s=[];t.datasets=e.map((e=>{const n=t.datasets.find((t=>t[i]===e[i]));return n&&e.data&&!s.includes(n)?(s.push(n),Object.assign(n,e),n):{...e}}))}function tl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gr;const i={labels:[],datasets:[]};return Zr(i,t.labels),Qr(i,t.datasets,e),i}function el(t,e){const{height:i=150,width:n=300,redraw:o=!1,datasetIdKey:a,type:r,data:l,options:h,plugins:c=[],fallbackContent:d,updateMode:u,...f}=t,g=s.useRef(null),p=s.useRef(null),m=()=>{g.current&&(p.current=new Wa(g.current,{type:r,data:tl(l,a),options:h&&{...h},plugins:c}),Jr(e,p.current))},x=()=>{Jr(e,null),p.current&&(p.current.destroy(),p.current=null)};return s.useEffect((()=>{!o&&p.current&&h&&function(t,e){const i=t.options;i&&e&&Object.assign(i,e)}(p.current,h)}),[o,h]),s.useEffect((()=>{!o&&p.current&&Zr(p.current.config.data,l.labels)}),[o,l.labels]),s.useEffect((()=>{!o&&p.current&&l.datasets&&Qr(p.current.config.data,l.datasets,a)}),[o,l.datasets]),s.useEffect((()=>{p.current&&(o?(x(),setTimeout(m)):p.current.update(u))}),[o,h,l.labels,l.datasets,u]),s.useEffect((()=>{p.current&&(x(),setTimeout(m))}),[r]),s.useEffect((()=>(m(),()=>x())),[]),W.createElement("canvas",{ref:g,role:"img",height:i,width:n,...f},d)}const il=s.forwardRef(el);function sl(t,e){return Wa.register(e),s.forwardRef(((e,i)=>W.createElement(il,{...e,ref:i,type:t})))}const nl=sl("line",uo),ol=sl("bar",ho),al=sl("pie",fo),rl={async recordView(t,e){const i=P(me,"articleStats",t),s=P(me,"dailyStats",`${t}_${this.getToday()}`),n=F(me);n.set(i,{articleId:t,views:B(1),uniqueVisitors:B(e.isUnique?1:0),[`deviceStats.${e.device}`]:B(1),updatedAt:N()},{merge:!0}),e.referrer&&n.set(i,{[`referrers.${e.referrer}`]:B(1)},{merge:!0}),n.set(s,{articleId:t,date:this.getToday(),views:B(1),uniqueVisitors:B(e.isUnique?1:0)},{merge:!0}),await n.commit()},async recordEngagement(t,e){const i=P(me,"articleStats",t);await V(i,{engagement:{scrollDepth:e.scrollDepth,timeOnPage:e.timeOnPage},updatedAt:N()},{merge:!0})},async recordShare(t,e){const i=P(me,"articleStats",t);await V(i,{[`shares.${e}`]:B(1),updatedAt:N()},{merge:!0})},async getArticleStats(t){const e=P(me,"articleStats",t),i=await T(e);return i.exists()?{id:i.id,...i.data(),updatedAt:i.data().updatedAt.toDate()}:null},async getDailyStats(t,e=30){const i=this.getDateBefore(e),s=D(me,"dailyStats"),n=M(s,C("articleId","==",t),C("date",">=",i),S("date","desc"));return(await A(n)).docs.map((t=>t.data()))},async getMostViewedArticles(t=10){const e=D(me,"articleStats"),i=M(e,S("views","desc"),H(t));return(await A(i)).docs.map((t=>({id:t.id,...t.data(),updatedAt:t.data().updatedAt.toDate()})))},async getMostEngagingArticles(t=10){const e=D(me,"articleStats"),i=M(e,S("engagement.timeOnPage","desc"),H(t));return(await A(i)).docs.map((t=>({id:t.id,...t.data(),updatedAt:t.data().updatedAt.toDate()})))},async getStats(t,e,i=10){const s=D(me,"stats"),n=M(s,C("date",">=",t),C("date","<=",e),S("date","desc"),H(i));return(await A(n)).docs.map((t=>({id:t.id,...t.data(),date:t.data().date.toDate()})))},async updateStats(t){const e=F(me),i=P(me,"stats",t.id);e.update(i,{views:t.views,likes:t.likes,shares:t.shares,comments:t.comments,date:$.fromDate(t.date)}),await e.commit()},getToday:()=>(new Date).toISOString().split("T")[0],getDateBefore(t){const e=new Date;return e.setDate(e.getDate()-t),e.toISOString().split("T")[0]},formatNumber:t=>t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"k":t.toString(),formatReadTime(t){const e=Math.floor(t/60);return e<1?"moins d'une minute":`${e} minute${e>1?"s":""}`}};function ll(){const[t,e]=s.useState(30),[i,n]=s.useState([]),[o,a]=s.useState([]),[r,l]=s.useState(!0),[h,c]=s.useState(null);s.useEffect((()=>{d()}),[t]);const d=async()=>{try{l(!0);const e=await rl.getMostViewedArticles(5),i=await Promise.all(e.map((async t=>{try{const e=await xe.getArticle(t.articleId);return{...t,title:(null==e?void 0:e.title)||"Article supprimé"}}catch(e){return{...t,title:"Article non trouvé"}}})));if(n(i),i.length>0){const e=await rl.getDailyStats(i[0].articleId,t);a(e)}}catch(e){c("Erreur lors du chargement des statistiques")}finally{l(!1)}},u={labels:o.map((t=>t.date)),datasets:[{label:"Vues",data:o.map((t=>t.views)),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.5)",tension:.4},{label:"Visiteurs uniques",data:o.map((t=>t.uniqueVisitors)),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.5)",tension:.4}]},f={labels:["Mobile","Desktop","Tablet"],datasets:[{data:i.length>0?[i[0].deviceStats.mobile,i[0].deviceStats.desktop,i[0].deviceStats.tablet]:[],backgroundColor:["rgba(59, 130, 246, 0.5)","rgba(16, 185, 129, 0.5)","rgba(251, 191, 36, 0.5)"],borderColor:["rgb(59, 130, 246)","rgb(16, 185, 129)","rgb(251, 191, 36)"],borderWidth:1}]},g={labels:["Facebook","Twitter","LinkedIn","Email"],datasets:[{data:i.length>0?[i[0].shares.facebook,i[0].shares.twitter,i[0].shares.linkedin,i[0].shares.email]:[],backgroundColor:["rgba(66, 103, 178, 0.5)","rgba(29, 161, 242, 0.5)","rgba(0, 119, 181, 0.5)","rgba(234, 67, 53, 0.5)"],borderColor:["rgb(66, 103, 178)","rgb(29, 161, 242)","rgb(0, 119, 181)","rgb(234, 67, 53)"],borderWidth:1}]};return tt.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[tt.jsxs("div",{className:"flex justify-between items-center mb-8",children:[tt.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Statistiques des articles"}),tt.jsxs("select",{value:t,onChange:t=>e(Number(t.target.value)),className:"ml-4 block pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md",children:[tt.jsx("option",{value:7,children:"7 jours"}),tt.jsx("option",{value:30,children:"30 jours"}),tt.jsx("option",{value:90,children:"90 jours"})]})]}),h&&tt.jsx("div",{className:"mb-4 bg-red-50 border-l-4 border-red-400 p-4",children:tt.jsxs("div",{className:"flex",children:[tt.jsx("div",{className:"flex-shrink-0",children:tt.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:tt.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),tt.jsx("div",{className:"ml-3",children:tt.jsx("p",{className:"text-sm text-red-700",children:h})})]})}),tt.jsxs("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[tt.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[tt.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Articles les plus vus"}),tt.jsx("div",{className:"space-y-4",children:i.map(((t,e)=>tt.jsxs("div",{className:"flex items-center justify-between",children:[tt.jsxs("div",{className:"flex items-center",children:[tt.jsxs("span",{className:"text-lg font-medium text-gray-500 w-8",children:["#",e+1]}),tt.jsxs("div",{children:[tt.jsx("h3",{className:"text-sm font-medium text-gray-900",children:t.title}),tt.jsxs("p",{className:"text-sm text-gray-500",children:[rl.formatNumber(t.views)," vues"]})]})]}),tt.jsxs("div",{className:"text-right",children:[tt.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[rl.formatNumber(t.uniqueVisitors)," visiteurs"]}),tt.jsxs("p",{className:"text-sm text-gray-500",children:[Math.round(t.uniqueVisitors/t.views*100),"% uniques"]})]})]},t.id)))})]}),tt.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[tt.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Évolution des vues"}),tt.jsx("div",{className:"h-64",children:tt.jsx(nl,{data:u,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})})]}),tt.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[tt.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Répartition par appareil"}),tt.jsx("div",{className:"h-64",children:tt.jsx(al,{data:f,options:{responsive:!0,maintainAspectRatio:!1}})})]}),tt.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[tt.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Partages sociaux"}),tt.jsx("div",{className:"h-64",children:tt.jsx(ol,{data:g,options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})})]})]}),r&&tt.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-25 flex items-center justify-center",children:tt.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})]})}Wa.register(Er,Fr,nr,ir,xr,Or,pr,qa,dr);export{ye as C,ll as S,ge as a,xe as b,ve as c,me as d,tt as j,pe as s};
//# sourceMappingURL=admin-B662x858.js.map
